{"version":3,"file":"rx.js","sources":["../src/utils/makeMap.js","../src/utils/type.js","../src/utils/immediate.js","../src/utils/animationFrame.js","../src/utils/ObjectUnsubscribedError.js","../src/utils/ArgumentOutOfRangeError.js","../src/Scheduler.js","../src/utils/isScheduler.js","../src/utils/Set.js","../src/utils/wrapOperator.js","../src/Subscription.js","../src/symbol.js","../src/Subscriber.js","../src/Observable.js","../src/observables/ArrayObservable.js","../src/observables/EmptyObservable.js","../src/observables/ScalarObservable.js","../src/observables/of.js","../src/observables/empty.js","../src/observables/ErrorObservable.js","../src/observables/throw.js","../src/observables/PromiseObservable.js","../src/observables/fromPromise.js","../src/observables/ArrayLikeObservable.js","../src/observables/IteratorObservable.js","../src/Notification.js","../src/operators/observeOn.js","../src/observables/FromObservable.js","../src/observables/from.js","../src/add/observable/of.js","../src/add/observable/empty.js","../src/add/observable/throw.js","../src/add/observable/fromPromise.js","../src/add/observable/from.js","../src/add/observable/range.js","../src/operators/do.js","../src/schedulers/Action.js","../src/schedulers/AsyncAction.js","../src/schedulers/AsapAction.js","../src/schedulers/AsyncScheduler.js","../src/schedulers/AsapScheduler.js","../src/schedulers/asap.js","../src/schedulers/async.js","../src/schedulers/AnimationFrameAction.js","../src/schedulers/AnimationFrameScheduler.js","../src/schedulers/animationFrame.js","../src/schedulers/QueueAction.js","../src/schedulers/QueueScheduler.js","../src/schedulers/queue.js","../src/schedulers/index.js","../src/operators/delay.js","../src/operators/take.js","../src/operators/filter.js","../src/operators/map.js","../src/OuterSubscriber.js","../src/InnerSubscriber.js","../src/utils/subscribeToResult.js","../src/operators/mergeMap.js","../src/operators/distinctUntilChanged.js","../src/operators/startWith.js","../src/operators/combineLatest.js","../src/add/operator/do.js","../src/add/operator/delay.js","../src/add/operator/take.js","../src/add/operator/filter.js","../src/add/operator/map.js","../src/add/operator/mergeMap.js","../src/add/operator/distinctUntilChanged.js","../src/add/operator/startWith.js","../src/add/operator/combineLatest.js","../src/Subject.js","../src/BehaviorSubject.js","../src/AsyncSubject.js","../src/ReplaySubject.js"],"sourcesContent":["export function makeMap (str, expectsLowerCase) {\n  const map = Object.create(null)\n  const list = str.split(',')\n  for (let i = 0; i < list.length; i++) {\n    map[list[i]] = true\n  }\n  return expectsLowerCase ? val => map[val.toLowerCase()] : val => map[val]\n}\n","import { makeMap } from './makeMap'\nconst objectProto = Object.prototype\nconst toString = obj => objectProto.toString.call(obj)\nconst viewClasses = [\n  'Int8Array',\n  'Uint8Array',\n  'Uint8ClampedArray',\n  'Int16Array',\n  'Uint16Array',\n  'Int32Array',\n  'Uint32Array',\n  'Float32Array',\n  'Float64Array'\n]\nconst viewClassesMap = makeMap(\n  viewClasses.map(clazz => `[object ${clazz}]`).join(',')\n)\nexport function isNull (obj) {\n  return obj === null\n}\n\nexport function isUndefined (obj) {\n  return obj === undefined\n}\n\nexport function isNil (obj) {\n  return obj == null\n}\n\nexport function isString (obj) {\n  const type = typeof obj\n  return type === 'string' || obj instanceof String\n}\n\nexport function isNumber (obj) {\n  const type = typeof obj\n  return type === 'number' || obj instanceof Number\n}\n\nexport function isBoolean (obj) {\n  return obj === true || obj === false || obj instanceof Boolean\n}\n\nexport function isSymbol (obj) {\n  const type = typeof obj\n  return type === 'symbol' || obj instanceof Symbol\n}\n\nexport function isObject (obj) {\n  const type = typeof obj\n  return obj != null && (type === 'object' || type === 'function')\n}\n\nexport function isObjectLike (obj) {\n  return obj != null && typeof obj === 'object'\n}\n\n/**\n *\n * @param obj {*}\n * @returns {boolean}\n * @example\n * eg1\n * isPlainObject(null) => false\n *\n * eg2\n * isPlainObject([1,2]) => false\n *\n * eg3\n * isPlainObject(Object.create(null)) => true\n *\n * eg4\n * function Foo(){}\n * isPlainObject(new Foo) => false\n */\nexport function isPlainObject (obj) {\n  // eg1,eg2\n  if (!isObjectLike(obj) || toString(obj) !== '[object Object]') {\n    return false\n  }\n  // eg3\n  const proto = Object.getPrototypeOf(obj)\n  if (proto === null) {\n    return true\n  }\n\n  // eg4\n  return proto.constructor === Object\n}\n\nexport function isArguments (obj) {\n  return isObjectLike(obj) && toString(obj) === '[object Arguments]'\n}\n\nexport function isArray (obj) {\n  return Array.isArray(obj)\n}\n\nexport function isArrayBuffer (obj) {\n  return toString(obj) === '[object ArrayBuffer]'\n}\n\nexport function isArrayBufferView (obj) {\n  return obj && viewClassesMap(Object.prototype.toString.call(obj))\n}\n\n// 2^53 - 1 数组下标从0开始，最大长度length - 1\nconst MAX_SAFE_INTEGER = 9007199254740991\n/**\n *\n * @param value {*}\n * @returns {boolean}\n * @example\n * eg1\n * isLength(1) => true\n *\n * eg2\n * isLength(-1) => false\n *\n * eg3\n * isLength(1.1) => false\n *\n * eg4\n * isLength(1.1) => false\n *\n * eg5\n * isLength(9007199254740992) => false\n *\n */\nexport function isLength (value) {\n  return (\n    typeof value === 'number' &&\n    value > -1 &&\n    value <= MAX_SAFE_INTEGER &&\n    value % 1 === 0\n  )\n}\n\nexport function isArrayLike (obj) {\n  return obj !== null && typeof obj !== 'function' && isLength(obj.length)\n}\n\nexport function isBuffer (obj) {\n  return Buffer.isBuffer(obj)\n}\n\nexport function isDate (obj) {\n  return isObjectLike(obj) && toString(obj) === '[object Date]'\n}\n\nexport function isElement (obj) {\n  return isObjectLike(obj) && obj.nodeType === 1\n}\n\nexport function isFunction (obj) {\n  if (!isObject(obj)) {\n    return false\n  }\n\n  const tag = toString(obj)\n  return (\n    tag === '[object Function]' ||\n    tag === '[object AsyncFunction]' ||\n    tag === '[object GeneratorFunction]' ||\n    tag === '[object Proxy]'\n  )\n}\n\nexport function isMap (obj) {\n  return isObjectLike(obj) && toString(obj) === '[object Map]'\n}\n\nexport function isSet (obj) {\n  return isObjectLike(obj) && toString(obj) === '[object Set]'\n}\n\nexport function isWeakMap (obj) {\n  return isObjectLike(obj) && toString(obj) === '[object WeakMap]'\n}\n\nexport function isWeakSet (obj) {\n  return isObjectLike(obj) && toString(obj) === '[object WeakSet]'\n}\n\nexport function isRegExp (obj) {\n  return isObjectLike(obj) && toString(obj) === '[object RegExp]'\n}\n\nexport function isError (obj) {\n  const tag = toString(obj)\n  return (\n    isObjectLike(obj) &&\n    (tag === '[object Error]' || tag === '[object DOMException]')\n  )\n}\n\nexport function isPromise (value) {\n  return (\n    value &&\n    typeof value.subscribe !== 'function' &&\n    typeof value.then === 'function'\n  )\n}\n","let id = 0\nconst cache = {}\nexport const setImmediate = cb => {\n  id++\n  cache[id] = cb\n  Promise.resolve().then(() => {\n    const handle = cache[id]\n    if (handle) {\n      handle()\n    }\n  })\n\n  return id\n}\n\nexport const clearImmediate = id => {\n  delete cache[id]\n}\n","/* eslint-disable no-undef */\nlet lastTime = 0\n\n// 之所以一个一个枚举是因为不能用上下文（微信小程序）\nfunction AnimationFrame () {\n  let raf\n  let caf\n  if (typeof requestAnimationFrame !== 'undefined') {\n    raf = requestAnimationFrame\n    caf = cancelAnimationFrame\n  } else if (typeof webkitRequestAnimationFrame !== 'undefined') {\n    raf = webkitRequestAnimationFrame\n    caf = webkitCancelAnimationFrame\n  } else if (typeof msRequestAnimationFrame !== 'undefined') {\n    raf = msRequestAnimationFrame\n    caf = msCancelAnimationFrame\n  } else if (typeof mozRequestAnimationFrame !== 'undefined') {\n    raf = mozRequestAnimationFrame\n    caf = mozCancelAnimationFrame\n  } else if (typeof oRequestAnimationFrame !== 'undefined') {\n    raf = oRequestAnimationFrame\n    caf = oCancelAnimationFrame\n  } else {\n    raf = function (callback) {\n      var currTime = new Date().getTime()\n      var timeToCall = Math.max(0, 16 - (currTime - lastTime))\n      var id = setTimeout(function () {\n        /* eslint-disable standard/no-callback-literal */\n        callback(currTime + timeToCall)\n      }, timeToCall)\n      lastTime = currTime + timeToCall\n      return id\n    }\n    caf = clearTimeout\n  }\n  return {\n    raf,\n    caf\n  }\n}\n\nconst { raf, caf } = AnimationFrame()\nexport const requestAnimationFrame = raf\nexport const cancelAnimationFrame = caf\n","export class ObjectUnsubscribedError extends Error {\n  constructor () {\n    super('object unsubscribed')\n    this.name = 'ObjectUnsubscribedError'\n    Object.setPrototypeOf(this, ObjectUnsubscribedError.prototype)\n  }\n}\n\nexport const throwObjectUnsubscribedError = () => {\n  throw new ObjectUnsubscribedError()\n}\n","export class ArgumentOutOfRangeError extends Error {\n  constructor () {\n    super('argument out of range')\n    this.name = 'ArgumentOutOfRangeError'\n    Object.setPrototypeOf(this, ArgumentOutOfRangeError.prototype)\n  }\n}\n","export class Scheduler {\n  constructor (SchedulerAction, now = Scheduler.now) {\n    this.SchedulerAction = SchedulerAction\n    this.now = now\n  }\n\n  // schedule是所有异步的入口，接受三个参数\n  // work: 需要执行的任务，delay：延迟多长时间执行，state：交给work的状态\n  // 每schedule一次都会生成一个action，action是Scheduler的执行单元\n  schedule (work, delay = 0, state) {\n    return new this.SchedulerAction(this, work).schedule(state, delay)\n  }\n\n  static now = Date.now\n}\n","import { Scheduler } from '../Scheduler'\nexport const isScheduler = val => {\n  return val != null && val instanceof Scheduler\n}\n","export class _Set {\n  constructor () {\n    this.set = Object.create(null)\n  }\n\n  add (key) {\n    this.set[key] = true\n  }\n\n  delete (key) {\n    if (this.has(key)) {\n      delete this.set[key]\n    }\n  }\n\n  has (key) {\n    return this.set[key] === true\n  }\n\n  clear () {\n    this.set = Object.create(null)\n  }\n}\n","import { toSubscriber, Subscriber } from '../Subscriber'\nimport { isFunction, isObject } from './type'\n\nconst subscritionActions = ['next', 'error', 'complete']\nexport function wrapOperator (operator) {\n  return function operatorWrapper (observer) {\n    let _subscrition = {\n      next (value) {\n        observer.next(value)\n      },\n\n      error (err) {\n        observer.error(err)\n      },\n\n      complete () {\n        observer.complete()\n      }\n    }\n\n    const res = operator(observer)\n    if (res === false) return\n    if (isFunction(res)) {\n      _subscrition.next = res\n    } else if (res instanceof Subscriber) {\n      _subscrition = res\n    } else if (isObject(res)) {\n      for (let i = 0; i < 3; i++) {\n        const action = subscritionActions[i]\n        if (isFunction(res[action])) {\n          _subscrition[action] = res[action]\n        }\n      }\n    }\n\n    const subscrition = toSubscriber(_subscrition)\n    // 先进行添加\n    observer.add(subscrition)\n    this.source.subscribe(subscrition)\n  }\n}\n","import { isFunction, _Set, isArray } from './utils'\n\nlet uid = 0\nexport class Subscription {\n  constructor () {\n    this._closed = false\n    this._uid = uid++\n    this._set = new _Set()\n    this.observers = []\n  }\n\n  unsubscribe () {\n    if (this.closed) return\n    if (this._unsubscribe) {\n      this._unsubscribe()\n    }\n    // _closed要在循环之前赋值，避免相互引用导致的死循环\n    this._closed = true\n    const observers = this.observers\n    for (let i = 0; i < observers.length; i++) {\n      const observer = observers[i]\n      if (observer.closed !== true) {\n        observer.unsubscribe()\n      }\n    }\n\n    this._set.clear()\n    this.observers = []\n  }\n\n  add (observer) {\n    // 在asObservable中会把自己加进来，要进行排除，不然在unsubscribe会造成死循环(bug：找了好久)\n    if (observer === this) return this\n\n    if (isFunction(observer)) {\n      this._add({\n        _uid: uid++,\n        unsubscribe: observer\n      })\n    } else if (observer instanceof Subscription) {\n      this._add(observer)\n    } else if (isArray(observer)) {\n      const list = observer\n      const length = list.length\n      for (let i = 0; i < length; i++) {\n        this.add(list[i])\n      }\n    }\n  }\n\n  _add (observer) {\n    const { _set, observers } = this\n    if (!_set.has(observer._uid)) {\n      _set.add(uid)\n      observers.push(observer)\n    }\n  }\n\n  remove (observer) {\n    const { _set, observers } = this\n    if (observer && observer._uid && _set.has(observer._uid)) {\n      observers.splice(observers.indexOf(observer), 1)\n    }\n  }\n\n  get closed () {\n    return this._closed\n  }\n}\n","export function getSymbolObservable (key) {\n  let $$observable\n\n  if (typeof Symbol === 'function') {\n    if (Symbol.observable) {\n      $$observable = Symbol.observable\n    } else {\n      $$observable = Symbol(key)\n      Symbol.observable = $$observable\n    }\n  } else {\n    $$observable = '@@' + key\n  }\n\n  return $$observable\n}\n\nexport function symbolIteratorPonyfill () {\n  if (typeof Symbol === 'function') {\n    if (!Symbol.iterator) {\n      Symbol.iterator = Symbol('iterator polyfill')\n    }\n    return Symbol.iterator\n  } else {\n    // [for Mozilla Gecko 27-35:](https://mzl.la/2ewE1zC)\n    if (\n      typeof Set !== 'undefined' &&\n      typeof new Set()['@@iterator'] === 'function'\n    ) {\n      return '@@iterator'\n    }\n    // required for compatability with es6-shim\n    if (typeof Map !== 'undefined') {\n      let keys = Object.getOwnPropertyNames(Map.prototype)\n      for (let i = 0; i < keys.length; ++i) {\n        let key = keys[i]\n        // according to spec, Map.prototype[@@iterator] and Map.orototype.entries must be equal.\n        if (\n          key !== 'entries' &&\n          key !== 'size' &&\n          Map.prototype[key] === Map.prototype['entries']\n        ) {\n          return key\n        }\n      }\n    }\n    return '@@iterator'\n  }\n}\n\nexport const iterator = symbolIteratorPonyfill()\n\nexport const observable = getSymbolObservable('observable')\n\nexport const rxSubscriber = getSymbolObservable('rxSubscriber')\n","import { isNil, isFunction, isObjectLike } from './utils'\nimport { Subscription } from './Subscription'\nimport { rxSubscriber as rxSubscriberSymbol } from './symbol'\nexport class Subscriber extends Subscription {\n  constructor (destinationOrNext, error, complete) {\n    super()\n    if (isObjectLike(destinationOrNext)) {\n      this.destination = destinationOrNext\n    } else {\n      this.destination = {\n        next: destinationOrNext && destinationOrNext.bind(this),\n        error: error && error.bind(this),\n        complete: complete && complete.bind(this)\n      }\n    }\n\n    this.isStopped = false\n    this.readyState = 0\n  }\n\n  next (val) {\n    if (this.isStopped) return\n    try {\n      this.readyState = 1\n      this._next(val)\n    } catch (e) {\n      this.unsubscribe()\n      this.errorSource = 'next'\n      this.errorValue = e\n    }\n  }\n\n  error (e) {\n    if (this.isStopped) return\n    try {\n      this.readyState = 2\n      this._error(e)\n    } catch (e) {\n      this.unsubscribe()\n      this.errorSource = 'error'\n      throw e\n    }\n  }\n\n  complete () {\n    if (this.isStopped) return\n    try {\n      this.readyState = 3\n      this._complete()\n    } catch (e) {\n      this.unsubscribe()\n      this.errorSource = 'complete'\n      throw e\n    }\n  }\n\n  add (observer) {\n    if (this.isStopped) {\n      if (isFunction(observer)) {\n        observer()\n      } else if (observer instanceof Subscription) {\n        observer.unsubscribe()\n      }\n    } else {\n      super.add(observer)\n    }\n  }\n\n  _next (value) {\n    if (this.destination.next) {\n      this.destination.next(value)\n    }\n  }\n\n  _error (e) {\n    if (this.destination.error) {\n      this.destination.error(e)\n    } else {\n      this.unsubscribe()\n      this.errorSource = 'error'\n      throw e\n    }\n    this.unsubscribe()\n  }\n\n  _complete () {\n    if (this.destination.complete) {\n      this.destination.complete()\n    }\n    this.unsubscribe()\n  }\n\n  _unsubscribe () {\n    this.isStopped = true\n  }\n\n  static create (...args) {\n    return new Subscriber(...args)\n  }\n}\n\nexport const emptySubscriber = new Subscriber()\n\nexport function toSubscriber (observerOrNext, error, complete) {\n  let next = observerOrNext\n  if (isNil(observerOrNext)) return emptySubscriber\n  if (observerOrNext instanceof Subscriber) return observerOrNext\n  if (observerOrNext[rxSubscriberSymbol]) {\n    next = observerOrNext[rxSubscriberSymbol]()\n  }\n  return new Subscriber(next, error, complete)\n}\n","import { toSubscriber } from './Subscriber'\nimport { observable as $$observable } from './symbol'\nimport { wrapOperator } from './utils'\nexport class Observable {\n  constructor (subscribe) {\n    if (subscribe) {\n      this._subscribe = subscribe\n    }\n    // 是否只触发一次数据\n    this._isScalar = false\n  }\n\n  lift (operator) {\n    const observable = new Observable()\n    observable.source = this\n    observable.operator = wrapOperator(operator)\n    return observable\n  }\n\n  subscribe (observerOrNext, error, complete) {\n    const observer = toSubscriber(observerOrNext, error, complete)\n\n    if (this.operator) {\n      this.operator(observer)\n    } else if (this._subscribe) {\n      // 存在source，source当最数据源（如subject中的asObservable）\n      observer.add(\n        this.source ? this._subscribe(observer) : this._trySubscribe(observer)\n      )\n    }\n\n    // 当在next中出错时，抛出错误对象\n    if (observer.errorValue && observer.errorSource === 'next') {\n      throw observer.errorValue\n    }\n\n    return observer\n  }\n\n  // 在订阅时出错要通知error，但不会抛出\n  _trySubscribe (observer) {\n    try {\n      return this._subscribe(observer)\n    } catch (e) {\n      observer.syncError = e\n      observer.error(e)\n    }\n  }\n\n  _subscribe (observer) {\n    return this.source.subscribe(observer)\n  }\n\n  [$$observable] () {\n    return this\n  }\n\n  static create (subscriber) {\n    return new Observable(subscriber)\n  }\n}\n","import { Observable } from '../Observable'\nexport class ArrayObservable extends Observable {\n  constructor (array, scheduler) {\n    super()\n    this.array = array\n    this.scheduler = scheduler\n  }\n\n  _subscribe (observer) {\n    const { array, scheduler } = this\n    const len = array.length\n    if (scheduler) {\n      scheduler.schedule(ArrayObservable.dispatch, 0, {\n        array,\n        observer,\n        index: 0,\n        count: len\n      })\n    } else {\n      for (let i = 0; i < len; i++) {\n        observer.next(array[i])\n      }\n      observer.complete()\n    }\n  }\n\n  static create (array, scheduler) {\n    return new ArrayObservable(array, scheduler)\n  }\n\n  static dispatch (state) {\n    const { observer, index, array, count } = state\n    // 数据发送完毕\n    if (index >= count) {\n      observer.complete()\n      return\n    }\n    // 在observer关闭以后也可以发送\n    observer.next(array[index])\n    if (observer.closed) return\n    state.index = index + 1\n    // 继续调用后续数据, this会绑定到scheduler的action上\n    this.schedule(state)\n  }\n}\n","import { Observable } from '../Observable'\nexport class EmptyObservable extends Observable {\n  constructor (scheduler) {\n    super()\n    this.scheduler = scheduler\n  }\n\n  _subscribe (observer) {\n    const scheduler = this.scheduler\n\n    if (scheduler) {\n      return scheduler.schedule(EmptyObservable.dispatch, 0, { observer })\n    } else {\n      observer.complete()\n    }\n  }\n\n  static create (scheduler) {\n    return new EmptyObservable(scheduler)\n  }\n\n  static dispatch ({ observer }) {\n    observer.complete()\n  }\n}\n","import { Observable } from '../Observable'\nexport class ScalarObservable extends Observable {\n  constructor (value, scheduler) {\n    super()\n    this.value = value\n    this.scheduler = scheduler\n  }\n\n  _subscribe (observer) {\n    const { value, scheduler } = this\n    if (scheduler) {\n      scheduler.schedule(ScalarObservable.dispatch, 0, {\n        observer,\n        value\n      })\n    } else {\n      observer.next(value)\n      observer.complete()\n    }\n  }\n\n  static create (array, scheduler) {\n    return new ScalarObservable(array, scheduler)\n  }\n\n  static dispatch (state) {\n    const { observer, value } = state\n    observer.next(value)\n    observer.complete()\n  }\n}\n","import { isScheduler } from '../utils'\nimport { ArrayObservable } from './ArrayObservable'\nimport { EmptyObservable } from './EmptyObservable'\nimport { ScalarObservable } from './ScalarObservable'\nexport const of = (...args) => {\n  let scheduler = args[args.length - 1]\n  if (isScheduler(scheduler)) {\n    args.pop()\n  } else {\n    scheduler = null\n  }\n  const length = args.length\n  if (length === 1) {\n    return new ScalarObservable(args[0], scheduler)\n  } else if (length > 1) {\n    return new ArrayObservable(args, scheduler)\n  }\n  return new EmptyObservable(scheduler)\n}\n","import { EmptyObservable } from './EmptyObservable'\nexport const empty = EmptyObservable.create\n","import { Observable } from '../Observable'\nexport class ErrorObservable extends Observable {\n  constructor (error, scheduler) {\n    super()\n    this.error = error\n    this.scheduler = scheduler\n  }\n\n  _subscribe (observer) {\n    const scheduler = this.scheduler\n    const error = this.error\n    if (scheduler) {\n      return scheduler.schedule(ErrorObservable.dispatch, 0, {\n        observer,\n        error\n      })\n    } else {\n      observer.error(error)\n    }\n  }\n\n  static create (scheduler) {\n    return new ErrorObservable(scheduler)\n  }\n\n  static dispatch ({ observer, error }) {\n    observer.error(error)\n  }\n}\n","import { ErrorObservable } from './ErrorObservable'\nexport const throwObservable = ErrorObservable.create\n","import { Observable } from '../Observable'\n\nexport class PromiseObservable extends Observable {\n  constructor (promise, scheduler) {\n    super()\n    this.promise = promise\n    this.scheduler = scheduler\n  }\n\n  _subscribe (observer) {\n    const { promise, scheduler } = this\n    if (scheduler) {\n      if (this._isScalar) {\n        scheduler.schedule(PromiseObservable.dispatch, 0, {\n          observer,\n          value: this.value\n        })\n      } else {\n        promise\n          .then(\n            value => {\n              this._isScalar = true\n              this.value = value\n              scheduler.schedule(PromiseObservable.dispatch, 0, {\n                observer,\n                value\n              })\n            },\n            error => {\n              scheduler.schedule(\n                ({ observer, error }) => {\n                  observer.error(error)\n                },\n                0,\n                { observer, error }\n              )\n            }\n          )\n          .catch(e => {\n            // escape the promise trap, throw unhandled errors\n            setTimeout(() => {\n              throw e\n            })\n          })\n      }\n    } else {\n      // 已经执行过\n      if (this._isScalar) {\n        observer.next(this.value)\n        observer.complete()\n      } else {\n        promise\n          .then(\n            value => {\n              this._isScalar = true\n              this.value = value\n              observer.next(value)\n              observer.complete()\n            },\n            e => {\n              observer.error(e)\n            }\n          )\n          .catch(e => {\n            // escape the promise trap, throw unhandled errors\n            setTimeout(() => {\n              throw e\n            })\n          })\n      }\n    }\n  }\n\n  static create (promise, scheduler) {\n    return new PromiseObservable(promise, scheduler)\n  }\n\n  static dispatch ({ observer, value }) {\n    observer.next(value)\n    observer.complete()\n  }\n}\n","import { PromiseObservable } from './PromiseObservable'\nexport const fromPromise = PromiseObservable.create\n","import { Observable } from '../Observable'\nimport { EmptyObservable } from './EmptyObservable'\nimport { ScalarObservable } from './ScalarObservable'\nexport class ArrayLikeObservable extends Observable {\n  constructor (array, scheduler) {\n    super()\n    this.array = array\n    this.scheduler = scheduler\n  }\n\n  _subscribe (observer) {\n    const { array, scheduler } = this\n    const len = array.length\n    if (scheduler) {\n      scheduler.schedule(ArrayLikeObservable.dispatch, 0, {\n        array,\n        observer,\n        index: 0,\n        count: len\n      })\n    } else {\n      for (let i = 0; i < len; i++) {\n        observer.next(array[i])\n      }\n      observer.complete()\n    }\n  }\n\n  static create (array, scheduler) {\n    const length = array.length\n    if (length === 0) {\n      return new EmptyObservable(scheduler)\n    }\n\n    if (length === 1) {\n      return new ScalarObservable(array[0], scheduler)\n    }\n\n    return new ArrayLikeObservable(array, scheduler)\n  }\n\n  static dispatch (state) {\n    const { observer, index, array, count } = state\n    // 数据发送完毕\n    if (index >= count) {\n      observer.complete()\n      return\n    }\n    // 在observer关闭以后也可以发送\n    observer.next(array[index])\n    if (observer.closed) return\n    state.index = index + 1\n    // 继续调用后续数据, this会绑定到scheduler的action上\n    this.schedule(state)\n  }\n}\n","import { Observable } from '../Observable'\nimport { iterator as SymbolIterator } from '../symbol'\nexport class IteratorObservable extends Observable {\n  constructor (iteratorObject, scheduler) {\n    super()\n    if (iteratorObject == null) {\n      throw new Error('iterator cannot be null.')\n    } else if (!iteratorObject[SymbolIterator]) {\n      throw new TypeError('object is not iterable')\n    }\n    this.iteratorObject = iteratorObject\n    this.scheduler = scheduler\n  }\n\n  _subscribe (observer) {\n    const { iteratorObject, scheduler } = this\n    const iterator = getIterator(iteratorObject)\n    if (scheduler) {\n      return scheduler.schedule(IteratorObservable.dispatch, 0, {\n        observer,\n        iterator,\n        index: 0\n      })\n    } else {\n      do {\n        const res = iterator.next()\n        if (res.done) {\n          observer.complete()\n          break\n        } else {\n          observer.next(res.value)\n        }\n        // 不理解\n        if (observer.closed) {\n          if (typeof iterator.return === 'function') {\n            iterator.return()\n          }\n          break\n        }\n      } while (true)\n    }\n  }\n\n  static create (iterator, scheduler) {\n    return new IteratorObservable(iterator, scheduler)\n  }\n\n  static dispatch (state) {\n    const { observer, iterator, index } = state\n    // if (hasError) {\n    //   observer.error(error)\n    //   return\n    // }\n\n    const result = iterator.next()\n    if (result.done) {\n      observer.complete()\n      return\n    }\n\n    observer.next(result.value)\n    state.index = index + 1\n\n    if (observer.closed) {\n      if (typeof iterator.return === 'function') {\n        iterator.return()\n      }\n      return\n    }\n\n    this.schedule(state)\n  }\n}\n\nclass StringIterator {\n  constructor (str, idx = 0, len = str.length) {\n    this.str = str\n    this.idx = idx\n    this.len = len\n  }\n\n  next () {\n    return this.idx < this.len\n      ? { done: false, value: this.str.charAt(this.idx++) }\n      : { done: true, value: undefined }\n  }\n\n  [SymbolIterator] () {\n    return this\n  }\n}\n\nclass ArrayIterator {\n  constructor (array, idx = 0, len = array.length) {\n    this.array = array\n    this.idx = idx\n    this.len = len\n  }\n\n  next () {\n    return this.idx < this.len\n      ? { done: false, value: this.array[this.idx++] }\n      : { done: true, value: undefined }\n  }\n\n  [SymbolIterator] () {\n    return this\n  }\n}\n\nfunction getIterator (obj) {\n  const i = obj[SymbolIterator]\n  if (!i && typeof obj === 'string') {\n    return new StringIterator(obj)\n  }\n  if (!i && obj.length !== undefined) {\n    return new ArrayIterator(obj)\n  }\n  if (!i) {\n    throw new TypeError('object is not iterable')\n  }\n  return obj[SymbolIterator]()\n}\n","import { isObjectLike, isUndefined } from './utils'\nimport { Observable } from './Observable'\nexport class Notification {\n  constructor (kind, value, error) {\n    this.kind = kind\n    this.value = value\n    this.error = error\n    this.hasValue = kind === 'N'\n  }\n\n  observe (observer) {\n    switch (this.kind) {\n      case 'N':\n        return observer.next && observer.next(this.value)\n      case 'E':\n        return observer.error && observer.error(this.error)\n      case 'C':\n        return observer.complete && observer.complete()\n    }\n  }\n\n  do (next, error, complete) {\n    this.observe({\n      next,\n      error,\n      complete\n    })\n  }\n\n  accept (nextOrObserver, error, complete) {\n    if (isObjectLike(nextOrObserver)) {\n      this.observe(nextOrObserver)\n    } else {\n      this.do(nextOrObserver, error, complete)\n    }\n  }\n\n  toObservable () {\n    const kind = this.kind\n    switch (kind) {\n      case 'N':\n        return Observable.of(this.value)\n      case 'E':\n        return Observable.throw(this.error)\n      case 'C':\n        return Observable.empty()\n    }\n    throw new Error('unexpected notification kind value')\n  }\n\n  static completeNotification = new Notification('C')\n  static undefinedValueNotification = new Notification('N', undefined)\n\n  static createNext (value) {\n    return isUndefined(value)\n      ? Notification.undefinedValueNotification\n      : new Notification('N', value)\n  }\n\n  static createError (e) {\n    return new Notification('E', undefined, e)\n  }\n\n  static createComplete () {\n    return Notification.completeNotification\n  }\n}\n","import { Subscriber } from '../Subscriber'\nimport { Notification } from '../Notification'\nexport class ObserveOnSubscriber extends Subscriber {\n  constructor (destination, scheduler, delay = 0) {\n    super(destination)\n    this.scheduler = scheduler\n    this.delay = delay\n  }\n\n  static dispatch ({ notification, destination }) {\n    notification.observe(destination)\n    // this: scheduler执行中的action\n    this.unsubscribe()\n  }\n\n  scheduleMessage (notification) {\n    this.add(\n      this.scheduler.schedule(ObserveOnSubscriber.dispatch, this.delay, {\n        notification,\n        destination: this.destination\n      })\n    )\n  }\n\n  _next (value) {\n    this.scheduleMessage(Notification.createNext(value))\n  }\n\n  _error (e) {\n    this.scheduleMessage(Notification.createError(e))\n  }\n\n  _complete () {\n    this.scheduleMessage(Notification.createComplete())\n  }\n}\n","import { Observable } from '../Observable'\nimport { ArrayObservable } from './ArrayObservable'\nimport { ArrayLikeObservable } from './ArrayLikeObservable'\nimport { PromiseObservable } from './PromiseObservable'\nimport { IteratorObservable } from './IteratorObservable'\nimport { ObserveOnSubscriber } from '../operators/observeOn'\nimport {\n  observable as SymbolObservable,\n  iterator as SymbolIterator\n} from '../symbol'\nimport { isFunction, isArrayLike, isPromise, isArray, isString } from '../utils'\n\nexport class FromObservable extends Observable {\n  constructor (ish, scheduler) {\n    super()\n    this.ish = ish\n    this.scheduler = scheduler\n  }\n\n  _subscribe (observer) {\n    const { ish, scheduler } = this\n    if (scheduler == null) {\n      return ish[SymbolObservable]().subscribe(observer)\n    } else {\n      return ish[SymbolObservable]().subscribe(\n        new ObserveOnSubscriber(observer, scheduler, 0)\n      )\n    }\n  }\n\n  static create (ish, scheduler) {\n    if (ish != null) {\n      if (isFunction(ish[SymbolObservable])) {\n        if (ish instanceof Observable && !scheduler) {\n          return ish\n        }\n        return new FromObservable(ish, scheduler)\n      }\n\n      if (isArray(ish)) {\n        return new ArrayObservable(ish, scheduler)\n      }\n\n      if (isPromise(ish)) {\n        return new PromiseObservable(ish, scheduler)\n      }\n\n      if (isFunction(ish[SymbolIterator]) || isString(ish)) {\n        return new IteratorObservable(ish, scheduler)\n      }\n\n      if (isArrayLike(ish)) {\n        return ArrayLikeObservable.create(ish, scheduler)\n      }\n    }\n    throw new TypeError(\n      ((ish !== null && typeof ish) || ish) + ' is not observable'\n    )\n  }\n}\n","import { FromObservable } from './FromObservable'\nexport const fromObservable = FromObservable.create\n","import { Observable } from '../../Observable'\nimport { of } from '../../observables'\nObservable.of = of\n","import { Observable } from '../../Observable'\nimport { empty } from '../../observables'\nObservable.empty = empty\n","import { Observable } from '../../Observable'\nimport { throwObservable } from '../../observables'\nObservable.throw = throwObservable\n","import { Observable } from '../../Observable'\nimport { fromPromise } from '../../observables'\nObservable.fromPromise = fromPromise\n","import { fromObservable } from '../../observables'\nimport { Observable } from '../../Observable'\nObservable.from = fromObservable\n","import { Observable } from '../../Observable'\nimport { ArrayObservable } from '../../observables'\nObservable.range = function (start, end, scheduler) {\n  const arr = []\n  for (let i = start; i <= end; i++) {\n    arr.push(i)\n  }\n  return new ArrayObservable(arr, scheduler)\n}\n","export const doOperator = (next, error, complete) => observer => ({\n  next (val) {\n    next && next(val)\n    observer.next(val)\n  },\n\n  error (e) {\n    error && error(e)\n    observer.error(e)\n  },\n\n  complete () {\n    complete && complete()\n    observer.complete()\n  }\n})\n","import { Subscription } from '../Subscription'\n\nexport class Action extends Subscription {\n  constructor (scheduler, work) {\n    super()\n    this.scheduler = scheduler\n    this.work = work\n  }\n\n  // 该方法需要在子类中重写\n  schedule (state, delay) {\n    return this\n  }\n}\n","import { Action } from './Action'\n\nexport class AsyncAction extends Action {\n  id = null\n  state = undefined\n  delay = 0\n  pending = false\n\n  schedule (state, delay = 0) {\n    if (this.closed) return this\n\n    this.state = state\n    this.delay = delay\n    this.pending = true\n    let { scheduler, id } = this\n    if (id != null) {\n      id = this.recycleAsyncId(scheduler, id, delay)\n    }\n    if (!id) {\n      id = this.requestAsyncId(scheduler, id, delay)\n    }\n    this.id = id\n    return this\n  }\n\n  recycleAsyncId (scheduler, id, delay) {\n    if (delay !== null && this.delay === delay && this.pending === false) {\n      return id\n    }\n    clearInterval(id)\n    return undefined\n  }\n\n  requestAsyncId (scheduler, id, delay) {\n    return setInterval(scheduler.flush.bind(scheduler, this), delay)\n  }\n\n  execute (state) {\n    if (this.closed) {\n      return new Error('executing a cancelled action')\n    }\n    this.pending = false\n    const error = this._execute(state)\n    if (error) {\n      return error\n    } else if (this.pending === false && this.id != null) {\n      this.id = this.recycleAsyncId(this.scheduler, this.id, null)\n    }\n  }\n\n  _execute (state) {\n    try {\n      this.work(state)\n    } catch (e) {\n      this.unsubscribe()\n      return e\n    }\n  }\n\n  _unsubscribe () {\n    const id = this.id\n    const scheduler = this.scheduler\n    const actions = scheduler.actions\n    const index = actions.indexOf(this)\n\n    this.work = null\n    this.state = null\n    this.pending = false\n    this.scheduler = null\n\n    if (index !== -1) {\n      actions.splice(index, 1)\n    }\n\n    if (id != null) {\n      this.id = this.recycleAsyncId(scheduler, id, null)\n    }\n\n    this.delay = null\n  }\n}\n","import { setImmediate, clearImmediate } from '../utils'\nimport { AsyncAction } from './AsyncAction'\nexport class AsapAction extends AsyncAction {\n  requestAsyncId (scheduler, id, delay = 0) {\n    if (delay != null && delay > 0) {\n      return super.requestAsyncId(scheduler, id, delay)\n    }\n    scheduler.actions.push(this)\n    return (\n      scheduler.scheduled ||\n      (scheduler.scheduled = setImmediate(\n        scheduler.flush.bind(scheduler, null)\n      ))\n    )\n  }\n\n  recycleAsyncId (scheduler, id, delay = 0) {\n    if ((delay !== null && delay > 0) || (delay === null && this.delay > 0)) {\n      return super.recycleAsyncId(scheduler, id, delay)\n    }\n\n    if (scheduler.actions.length === 0) {\n      clearImmediate(id)\n      scheduler.scheduled = undefined\n    }\n\n    return undefined\n  }\n}\n","import { Scheduler } from '../Scheduler'\nexport class AsyncScheduler extends Scheduler {\n  actions = []\n  active = false\n  scheduled = undefined\n\n  flush (action) {\n    const { actions } = this\n    // 在schedule中继续调用schedule，如果schedule是同步的（QueueScheduler），只需要添加队列中等待执行即可\n    if (this.active) {\n      actions.push(action)\n      return\n    }\n    this.active = true\n    let error\n    do {\n      if ((error = action.execute(action.state, action.delay))) {\n        break\n      }\n    } while ((action = actions.shift()))\n    this.active = false\n    if (error) {\n      while ((action = actions.shift())) {\n        action.unsubscribe()\n      }\n      throw error\n    }\n  }\n}\n","import { AsyncScheduler } from './AsyncScheduler'\nexport class AsapScheduler extends AsyncScheduler {\n  flush (action) {\n    this.active = true\n    this.scheduled = undefined\n    const actions = this.actions\n    let error\n    action = action || actions.shift()\n    do {\n      if ((error = action.execute(action.state, action.delay))) break\n    } while ((action = actions.shift()))\n\n    this.active = false\n\n    if (error) {\n      while ((action = actions.shift())) {\n        action.unsubscribe()\n      }\n      throw error\n    }\n  }\n}\n","import { AsapAction } from './AsapAction'\nimport { AsapScheduler } from './AsapScheduler'\nexport const asap = new AsapScheduler(AsapAction)\n","import { AsyncAction } from './AsyncAction'\nimport { AsyncScheduler } from './AsyncScheduler'\nexport const async = new AsyncScheduler(AsyncAction)\n","import { requestAnimationFrame, cancelAnimationFrame } from '../utils'\nimport { AsyncAction } from './AsyncAction'\nexport class AnimationFrameAction extends AsyncAction {\n  requestAsyncId (scheduler, id, delay = 0) {\n    if (delay != null && delay > 0) {\n      return super.requestAsyncId(scheduler, id, delay)\n    }\n    scheduler.actions.push(this)\n    return (\n      scheduler.scheduled ||\n      (scheduler.scheduled = requestAnimationFrame(\n        scheduler.flush.bind(scheduler, null)\n      ))\n    )\n  }\n\n  recycleAsyncId (scheduler, id, delay = 0) {\n    if ((delay !== null && delay > 0) || (delay === null && this.delay > 0)) {\n      return super.recycleAsyncId(scheduler, id, delay)\n    }\n\n    if (scheduler.actions.length === 0) {\n      cancelAnimationFrame(id)\n      scheduler.scheduled = undefined\n    }\n\n    return undefined\n  }\n}\n","import { AsyncScheduler } from './AsyncScheduler'\nexport class AnimationFrameScheduler extends AsyncScheduler {\n  flush (action) {\n    this.active = true\n    this.scheduled = undefined\n    const actions = this.actions\n    let error\n    action = action || actions.shift()\n    do {\n      if ((error = action.execute(action.state, action.delay))) break\n    } while ((action = actions.shift()))\n\n    this.active = false\n\n    if (error) {\n      while ((action = actions.shift())) {\n        action.unsubscribe()\n      }\n      throw error\n    }\n  }\n}\n","import { AnimationFrameAction } from './AnimationFrameAction'\nimport { AnimationFrameScheduler } from './AnimationFrameScheduler'\nexport const animationFrame = new AnimationFrameScheduler(AnimationFrameAction)\n","import { AsyncAction } from './AsyncAction'\n\nexport class QueueAction extends AsyncAction {\n  schedule (state, delay = 0) {\n    if (this.closed) return this\n    if (delay > 0) {\n      return super.schedule(state, delay)\n    }\n\n    this.state = state\n    this.delay = delay\n    this.scheduler.flush(this)\n    return this\n  }\n\n  requestAsyncId (scheduler, id, delay) {\n    if ((delay !== null && delay > 0) || (delay === null && this.delay > 0)) {\n      return super.requestAsyncId(scheduler, id, delay)\n    }\n    return scheduler.flush(this)\n  }\n}\n","import { AsyncScheduler } from './AsyncScheduler'\nexport class QueueScheduler extends AsyncScheduler {}\n","import { QueueAction } from './QueueAction'\nimport { QueueScheduler } from './QueueScheduler'\nexport const queue = new QueueScheduler(QueueAction)\n","import { asap } from './asap'\nimport { async } from './async'\nimport { animationFrame } from './animationFrame'\nimport { queue } from './queue'\n\nexport const Scheduler = {\n  async,\n  asap,\n  animationFrame,\n  queue\n}\n","import { Scheduler } from '../schedulers'\nimport { Subscriber } from '../Subscriber'\nimport { Notification } from '../Notification'\nimport { isDate } from '../utils'\nexport function delayOperator (delay = 0, scheduler = Scheduler.async) {\n  const absoluteDelay = isDate(delay)\n  const delayFor = absoluteDelay ? +delay - scheduler.now() : Math.abs(delay)\n  return observer => new DelaySubscriber(observer, delayFor, scheduler)\n}\n\nclass DelaySubscriber extends Subscriber {\n  constructor (destination, delay, scheduler) {\n    super(destination)\n    this.delay = delay\n    this.scheduler = scheduler\n    this.queue = []\n    this.active = false\n    this.errored = false\n  }\n\n  _schedule (scheduler) {\n    this.active = true\n    this.add(\n      scheduler.schedule(DelaySubscriber.dispatch, this.delay, {\n        source: this,\n        destination: this.destination,\n        scheduler\n      })\n    )\n  }\n\n  scheduleNotification (notification) {\n    if (this.errored === true) {\n      return\n    }\n\n    const scheduler = this.scheduler\n    const message = {\n      time: scheduler.now() + this.delay,\n      notification\n    }\n    this.queue.push(message)\n\n    if (this.active === false) {\n      this._schedule(scheduler)\n    }\n  }\n\n  _next (value) {\n    this.scheduleNotification(Notification.createNext(value))\n  }\n\n  _error (err) {\n    this.errored = true\n    this.queue = []\n    this.destination.error(err)\n  }\n\n  _complete () {\n    this.scheduleNotification(Notification.createComplete())\n  }\n\n  static dispatch (state) {\n    const source = state.source\n    const queue = source.queue\n    const scheduler = state.scheduler\n    const destination = state.destination\n\n    while (queue.length > 0 && queue[0].time - scheduler.now() <= 0) {\n      queue.shift().notification.observe(destination)\n    }\n\n    if (queue.length > 0) {\n      const delay = Math.max(0, queue[0].time - scheduler.now())\n      this.schedule(state, delay)\n    } else {\n      source.active = false\n    }\n  }\n}\n","import { ArgumentOutOfRangeError } from '../utils'\nexport function takeOperator (number = Number.POSITIVE_INFINITY) {\n  if (number < 0) {\n    throw new ArgumentOutOfRangeError()\n  }\n  return observer => {\n    let count = 0\n    if (number === 0) {\n      observer.complete()\n      return false\n    }\n    return function (val) {\n      count++\n      if (count > number) {\n        observer.complete()\n      } else {\n        observer.next(val)\n        if (count === number) {\n          observer.complete()\n        }\n      }\n    }\n  }\n}\n","export function filterOperator (predicate, context) {\n  let index = 0\n  return observer => val => {\n    try {\n      if (predicate.call(context, val, index++)) {\n        observer.next(val)\n      }\n    } catch (e) {\n      observer.error(e)\n    }\n  }\n}\n","export function mapOperator (project, context) {\n  if (typeof project !== 'function') {\n    throw new TypeError(\n      'argument is not a function. Are you looking for `mapTo()`?'\n    )\n  }\n  let index = 0\n  return observer => val => {\n    try {\n      observer.next(project.call(context, val, index++))\n    } catch (e) {\n      observer.error(e)\n    }\n  }\n}\n","import { Subscriber } from './Subscriber'\n\nexport class OuterSubscriber extends Subscriber {\n  notifyNext (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n    this.destination.next(innerValue)\n  }\n\n  notifyError (error, innerSub) {\n    this.destination.error(error)\n  }\n\n  notifyComplete (innerSub) {\n    this.destination.complete()\n  }\n}\n","import { Subscriber } from './Subscriber'\n\nexport class InnerSubscriber extends Subscriber {\n  constructor (parent, outerValue, outerIndex) {\n    super()\n    this.parent = parent\n    this.outerValue = outerValue\n    this.outerIndex = outerIndex\n    this.index = 0\n  }\n\n  _next (value) {\n    this.parent.notifyNext(\n      this.outerValue,\n      value,\n      this.outerIndex,\n      this.index++,\n      this\n    )\n  }\n\n  _error (error) {\n    this.parent.notifyError(error, this)\n    this.unsubscribe()\n  }\n\n  _complete () {\n    this.parent.notifyComplete(this)\n    this.unsubscribe()\n  }\n}\n","import {\n  iterator as SymbolIterator,\n  observable as SymbolObservable\n} from '../symbol'\nimport { isObject, isArrayLike, isPromise } from './type'\nimport { Observable } from '../Observable'\nimport { InnerSubscriber } from '../InnerSubscriber'\nexport function subscribeToResult (\n  outerSubscriber,\n  result,\n  outerValue,\n  outerIndex\n) {\n  const destination = new InnerSubscriber(\n    outerSubscriber,\n    outerValue,\n    outerIndex\n  )\n  if (destination.closed) return null\n  if (result instanceof Observable) {\n    if (result._isScalar) {\n      destination.next(result.value)\n      destination.complete()\n      return null\n    } else {\n      return result.subscribe(destination)\n    }\n  } else if (isArrayLike(result)) {\n    for (let i = 0, len = result.length; i < len && !destination.closed; i++) {\n      destination.next(result[i])\n    }\n    if (!destination.closed) {\n      destination.complete()\n    }\n  } else if (isPromise(result)) {\n    result\n      .then(\n        value => {\n          if (!destination.closed) {\n            destination.next(value)\n            destination.complete()\n          }\n        },\n        err => destination.error(err)\n      )\n      .catch(err => {\n        setTimeout(() => {\n          throw err\n        })\n      })\n    return destination\n  } else if (result && typeof result[SymbolIterator] === 'function') {\n    const iterator = result[SymbolIterator]()\n    do {\n      let item = iterator.next()\n      if (item.done) {\n        destination.complete()\n        break\n      }\n      destination.next(item.value)\n      if (destination.closed) {\n        break\n      }\n    } while (true)\n  } else if (result && typeof result[SymbolObservable] === 'function') {\n    const obs = result[SymbolObservable]()\n    if (typeof obs.subscribe !== 'function') {\n      destination.error(\n        new TypeError(\n          'Provided object does not correctly implement Symbol.observable'\n        )\n      )\n    } else {\n      return obs.subscribe(\n        new InnerSubscriber(outerSubscriber, outerValue, outerIndex)\n      )\n    }\n  } else {\n    const value = isObject(result) ? 'an invalid object' : `'${result}'`\n    const msg =\n      `You provided ${value} where a stream was expected.` +\n      ' You can provide an Observable, Promise, Array, or Iterable.'\n    destination.error(new TypeError(msg))\n  }\n  return null\n}\n","import { OuterSubscriber } from '../OuterSubscriber'\nimport { isNumber } from '../utils'\nimport { subscribeToResult } from '../utils/subscribeToResult'\n\nexport function mergeMapOperator (\n  project,\n  resultSelector,\n  concurrent = Number.POSITIVE_INFINITY\n) {\n  if (isNumber(resultSelector)) {\n    concurrent = resultSelector\n    resultSelector = null\n  }\n  return observer =>\n    new MergeMapSubscriber(observer, project, resultSelector, concurrent)\n}\n\nclass MergeMapSubscriber extends OuterSubscriber {\n  constructor (destination, project, resultSelector, concurrent) {\n    super(destination)\n    this.project = project\n    this.resultSelector = resultSelector\n    this.concurrent = concurrent\n    this.index = 0\n    this.hasCompleted = false\n    this.buffer = []\n    this.active = 0\n  }\n\n  _next (value) {\n    if (this.active < this.concurrent) {\n      this._tryNext(value)\n    } else {\n      this.buffer.push(value)\n    }\n  }\n\n  _tryNext (value) {\n    try {\n      const index = this.index++\n      const result = this.project(value, index)\n      this.active++\n      this._innerSub(result, value, index)\n    } catch (e) {\n      super._error(e)\n    }\n  }\n\n  _innerSub (ish, value, index) {\n    this.add(subscribeToResult(this, ish, value, index))\n  }\n\n  _complete () {\n    this.hasCompleted = true\n    // 所有的都结束了\n    if (this.active === 0 && this.buffer.length === 0) {\n      this.destination.complete()\n    }\n  }\n\n  notifyNext (outerValue, innerValue, outerIndex, innerIndex) {\n    if (this.resultSelector) {\n      this._notifyResultSelector(outerValue, innerValue, outerIndex, innerIndex)\n    } else {\n      this.destination.next(innerValue)\n    }\n  }\n\n  _notifyResultSelector (outerValue, innerValue, outerIndex, innerIndex) {\n    try {\n      const result = this.resultSelector(\n        outerValue,\n        innerValue,\n        outerIndex,\n        innerIndex\n      )\n      this.destination.next(result)\n    } catch (err) {\n      this.destination.error(err)\n    }\n  }\n\n  notifyComplete (innerSub) {\n    const buffer = this.buffer\n    this.remove(innerSub)\n    this.active--\n    if (buffer.length > 0) {\n      this._next(buffer.shift())\n    } else if (this.active === 0 && this.hasCompleted) {\n      this.destination.complete()\n    }\n  }\n}\n","import { isFunction } from '../utils'\nexport function distinctUntilChangedOperator (compare, keySelector) {\n  const selectable = isFunction(keySelector)\n  compare = isFunction(compare) ? compare : (a, b) => a === b\n  return observer => {\n    let emited = false\n    let key\n    let prevKey\n    return function (value) {\n      try {\n        if (selectable) {\n          key = keySelector(value)\n        } else {\n          key = value\n        }\n\n        if (!emited || Boolean(compare(prevKey, key)) === false) {\n          observer.next(value)\n        }\n\n        emited = true\n        prevKey = key\n      } catch (e) {\n        observer.error(e)\n      }\n    }\n  }\n}\n","import { isScheduler } from '../utils'\nexport function startWithOperator (...args) {\n  const scheduler = args[args.length - 1]\n  let hasScheduler = false\n  if (isScheduler(scheduler)) {\n    args.pop()\n    hasScheduler = true\n  }\n  const length = args.length\n\n  // 不能使用箭头函数\n  const dispatch = function (state) {\n    const { values, index, length, observer } = state\n    if (index >= length) return\n    observer.next(values[index])\n    state.index = index + 1\n    this.schedule(state)\n  }\n  return observer => {\n    if (hasScheduler) {\n      scheduler.schedule(dispatch, 0, {\n        values: args,\n        index: 0,\n        length,\n        observer\n      })\n    } else {\n      for (let i = 0; i < length; i++) {\n        observer.next(args[i])\n      }\n    }\n  }\n}\n","import { Subscriber } from '../Subscriber'\nimport { isArray } from '../utils'\nexport function combineLatestOperator (others, project) {\n  return observer => new combineLatestSubscriber(observer, others, project)\n}\n\nclass combineLatestSubscriber extends Subscriber {\n  constructor (destination, others, project) {\n    super(destination)\n    this.streams = isArray(others) ? others : [others]\n    this.initState()\n    this.project = project\n    this.allHasValue = false\n    this.observeOnStreams()\n  }\n\n  initState () {\n    const size = (this.size = this.streams.length + 1)\n    const states = (this.states = new Array(this.size))\n    for (let i = 0; i < size; i++) {\n      states[i] = {\n        hasValue: false,\n        value: undefined,\n        isStopped: false\n      }\n    }\n  }\n\n  _next (value) {\n    this.setNext(0, value)\n  }\n\n  _error (err) {\n    this.notifyError(err)\n  }\n\n  _complete () {\n    this.setComplete(0)\n    this.unsubscribe()\n  }\n\n  _tryProject (values) {\n    try {\n      const data = this.project.apply(this, values)\n      this.destination.next(data)\n    } catch (err) {\n      this.notifyError(err)\n    }\n  }\n\n  notifyNext () {\n    const { states, size } = this\n    if (!this.allHasValue) {\n      const res = states.filter(state => state.hasValue)\n      this.allHasValue = res.length === size\n    }\n\n    if (this.allHasValue) {\n      const values = states.map(state => state.value)\n      this._tryProject(values)\n    }\n  }\n\n  notifyComplete () {\n    const res = this.states.filter(state => state.isStopped)\n    if (res.length === this.size) {\n      this.destination.complete()\n    }\n  }\n\n  notifyError (err) {\n    this.destination.error(err)\n    this.streams.forEach(stream => {\n      stream.error(err)\n    })\n  }\n\n  setNext (index, value) {\n    const state = this.states[index]\n    state.hasValue = true\n    state.value = value\n    this.notifyNext()\n  }\n\n  setComplete (index) {\n    this.states[index].isStopped = true\n    this.notifyComplete()\n  }\n\n  observeOnStreams () {\n    const subs = this.streams.map((stream, index) =>\n      stream.subscribe(\n        value => {\n          this.setNext(index + 1, value)\n        },\n\n        err => {\n          this.notifyError(err)\n        },\n\n        () => {\n          this.setComplete(index + 1)\n        }\n      )\n    )\n\n    this.add(subs)\n  }\n}\n","import { doOperator } from '../../operators'\nimport { Observable } from '../../Observable'\n\nObservable.prototype.do = function (nextOrObserver, error, complete) {\n  return this.lift(doOperator(nextOrObserver, error, complete))\n}\n","import { delayOperator } from '../../operators'\nimport { Observable } from '../../Observable'\n\nObservable.prototype.delay = function (nextOrObserver, error, complete) {\n  return this.lift(delayOperator(nextOrObserver, error, complete))\n}\n","import { takeOperator } from '../../operators'\nimport { Observable } from '../../Observable'\n\nObservable.prototype.take = function (number) {\n  return this.lift(takeOperator(number))\n}\n","import { filterOperator } from '../../operators'\nimport { Observable } from '../../Observable'\n\nObservable.prototype.filter = function (predicate, context) {\n  return this.lift(filterOperator(predicate, context))\n}\n","import { mapOperator } from '../../operators'\nimport { Observable } from '../../Observable'\n\nObservable.prototype.map = function (project, context) {\n  return this.lift(mapOperator(project, context))\n}\n","import { mergeMapOperator } from '../../operators'\nimport { Observable } from '../../Observable'\n\nObservable.prototype.mergeMap = function (project, resultSelector, concurrent) {\n  return this.lift(mergeMapOperator(project, resultSelector, concurrent))\n}\n","import { distinctUntilChangedOperator } from '../../operators'\nimport { Observable } from '../../Observable'\n\nObservable.prototype.distinctUntilChanged = function (compare, keySelector) {\n  return this.lift(distinctUntilChangedOperator(compare, keySelector))\n}\n","import { startWithOperator } from '../../operators'\nimport { Observable } from '../../Observable'\n\nObservable.prototype.startWith = function (...args) {\n  return this.lift(startWithOperator(...args))\n}\n","import { combineLatestOperator } from '../../operators'\nimport { Observable } from '../../Observable'\n\nObservable.prototype.combineLatest = function (other, project) {\n  return this.lift(combineLatestOperator(other, project))\n}\n","import { Observable } from './Observable'\nimport { ObjectUnsubscribedError, wrapOperator } from './utils'\nimport { rxSubscriber as rxSubscriberSymbol } from './symbol'\nexport class Subject extends Observable {\n  constructor () {\n    super()\n    this.closed = false\n    this.isStopped = false\n    this.observers = []\n    this.hasError = false\n    this.thrownError = null\n  }\n\n  lift (operator) {\n    const subject = new AnonymousSubject(this, this)\n    subject.operator = wrapOperator(operator)\n    return subject\n  }\n\n  next (state) {\n    if (this.closed) {\n      throw new ObjectUnsubscribedError()\n    }\n    if (!this.isStopped) {\n      iterateObserver(this.observers, 'next', state)\n    }\n  }\n\n  error (e) {\n    if (this.closed) {\n      throw new ObjectUnsubscribedError()\n    }\n    if (!this.isStopped) {\n      this.hasError = true\n      this.thrownError = e\n      this.isStopped = true\n      iterateObserver(this.observers, 'error', e)\n      this.observers = []\n    }\n  }\n\n  complete () {\n    if (this.closed) {\n      throw new ObjectUnsubscribedError()\n    }\n    if (!this.isStopped) {\n      this.isStopped = true\n      iterateObserver(this.observers, 'complete')\n      this.observers = []\n    }\n  }\n\n  unsubscribe () {\n    this.closed = true\n    this.isStopped = true\n    this.observers = null\n  }\n\n  _trySubscribe (observer) {\n    if (this.closed) {\n      throw new ObjectUnsubscribedError()\n    } else {\n      return super._trySubscribe(observer)\n    }\n  }\n\n  _subscribe (observer) {\n    if (this.hasError) {\n      observer.error(this.thrownError)\n    } else if (this.isStopped) {\n      observer.complete()\n    } else {\n      this.observers.push(observer)\n      // 释放资源\n      return () => subjectSubscription(this, observer)\n    }\n  }\n\n  asObservable () {\n    const observable = new Observable()\n    observable.source = this\n    return observable\n  }\n\n  static create (destination, source) {\n    return new AnonymousSubject(destination, source)\n  }\n\n  // Subject -> Subscriber\n  [rxSubscriberSymbol] () {\n    const subject = this\n    return {\n      next (val) {\n        subject.next(val)\n      },\n      error (e) {\n        subject.error(e)\n      },\n      complete () {\n        subject.complete()\n      }\n    }\n  }\n}\n\nexport class AnonymousSubject extends Subject {\n  constructor (destination, source) {\n    super()\n    this.dest = destination\n    this.source = source\n  }\n\n  next (value) {\n    if (this.dest && this.dest.next) {\n      this.dest.next(value)\n    }\n  }\n\n  error (err) {\n    if (this.dest && this.dest.error) {\n      this.dest.error(err)\n    }\n  }\n\n  complete () {\n    if (this.dest && this.dest.complete) {\n      this.dest.complete()\n    }\n  }\n\n  _subscribe (observer) {\n    if (this.source) {\n      return this.source.subscribe(observer)\n    }\n  }\n}\n\nfunction iterateObserver (observers, key, val) {\n  const len = observers.length\n  const list = observers.slice()\n  for (let i = 0; i < len; i++) {\n    list[i][key](val)\n  }\n}\n\nfunction subjectSubscription (subject, observer) {\n  if (subject.observers.length === 0) {\n    return\n  }\n  const index = subject.observers.indexOf(observer)\n  if (index !== -1) {\n    subject.observers.splice(index, 1)\n  }\n}\n","import { Subject } from './Subject'\nimport { ObjectUnsubscribedError } from './utils'\nexport class BehaviorSubject extends Subject {\n  constructor (val) {\n    super()\n    this._value = val\n  }\n\n  next (val) {\n    this._value = val\n    super.next(val)\n  }\n\n  _subscribe (observer) {\n    const res = super._subscribe(observer)\n    if (!observer.closed) {\n      observer.next(this._value)\n    }\n    return res\n  }\n\n  getValue () {\n    if (this.hasError) {\n      throw this.thrownError\n    } else if (this.closed) {\n      throw new ObjectUnsubscribedError()\n    } else {\n      return this._value\n    }\n  }\n\n  get value () {\n    return this.getValue()\n  }\n}\n","import { Subject } from './Subject'\nexport class AsyncSubject extends Subject {\n  value = null\n  hasNext = false\n  hasCompleted = false\n\n  _subscribe (observer) {\n    if (this.hasError) {\n      observer.error(this.thrownError)\n    } else if (this.hasCompleted && this.hasNext) {\n      observer.next(this.value)\n      observer.complete()\n    }\n    return super._subscribe(observer)\n  }\n\n  next (value) {\n    if (!this.hasCompleted) {\n      this.value = value\n      this.hasNext = true\n    }\n  }\n\n  error (error) {\n    if (!this.hasCompleted) {\n      super.error(error)\n    }\n  }\n\n  complete () {\n    this.hasCompleted = true\n    if (this.hasNext) {\n      super.next(this.value)\n    }\n    super.complete()\n  }\n}\n","import { Subject } from './Subject'\nimport { Scheduler } from './Scheduler'\nimport { ObjectUnsubscribedError } from './utils'\nimport { ObserveOnSubscriber } from './operators/observeOn'\nexport class ReplaySubject extends Subject {\n  constructor (\n    bufferSize = Number.POSITIVE_INFINITY,\n    windowTime = Number.POSITIVE_INFINITY,\n    scheduler\n  ) {\n    super()\n    this._bufferSize = bufferSize < 1 ? 1 : bufferSize\n    this._windowTime = windowTime < 1 ? 1 : windowTime\n    this.scheduler = scheduler\n    this._events = []\n  }\n\n  next (value) {\n    this._events.push({\n      time: this._getNow(),\n      value\n    })\n    // 避免数据添加过多\n    this._trimBufferThenGetEvents()\n    super.next(value)\n  }\n\n  _subscribe (observer) {\n    const events = this._trimBufferThenGetEvents()\n    const scheduler = this.scheduler\n    // 在ReplaySubject中关闭了还订阅会报错\n    if (this.closed) {\n      throw new ObjectUnsubscribedError()\n    }\n    let subscription\n    if (!this.hasError && !this.isStopped) {\n      subscription = super._subscribe(observer)\n    }\n\n    if (scheduler) {\n      observer = new ObserveOnSubscriber(observer, scheduler)\n      observer.add(observer)\n    }\n\n    const length = events.length\n    for (let i = 0; i < length; i++) {\n      observer.next(events[i].value)\n    }\n\n    if (this.hasError) {\n      observer.error(this.thrownError)\n    } else if (this.isStopped) {\n      observer.complete()\n    }\n\n    return subscription\n  }\n\n  _getNow () {\n    return (this.scheduler || Scheduler).now()\n  }\n\n  _trimBufferThenGetEvents () {\n    const { _events, _bufferSize, _windowTime } = this\n    let length = _events.length\n    const now = this._getNow()\n    let index = 0\n    if (length > _bufferSize) {\n      _events.splice(0, length - _bufferSize)\n    }\n\n    if (_windowTime === Number.POSITIVE_INFINITY) {\n      return _events\n    }\n\n    length = _events.length\n    while (index < length) {\n      if (now - _events[index].time < _windowTime) {\n        break\n      }\n      index++\n    }\n    _events.splice(0, index)\n    return _events\n  }\n}\n"],"names":["makeMap","str","expectsLowerCase","map","Object","create","list","split","i","length","val","toLowerCase","objectProto","prototype","toString","call","obj","viewClasses","viewClassesMap","clazz","join","isUndefined","undefined","isNil","isString","type","String","isNumber","Number","isObject","isObjectLike","isArray","Array","MAX_SAFE_INTEGER","isLength","value","isArrayLike","isDate","isFunction","tag","isPromise","subscribe","then","id","cache","setImmediate","cb","resolve","handle","clearImmediate","lastTime","AnimationFrame","raf","caf","requestAnimationFrame","cancelAnimationFrame","webkitRequestAnimationFrame","webkitCancelAnimationFrame","msRequestAnimationFrame","msCancelAnimationFrame","mozRequestAnimationFrame","mozCancelAnimationFrame","oRequestAnimationFrame","oCancelAnimationFrame","callback","currTime","Date","getTime","timeToCall","Math","max","setTimeout","clearTimeout","ObjectUnsubscribedError","name","setPrototypeOf","Error","ArgumentOutOfRangeError","Scheduler","SchedulerAction","now","work","delay","state","schedule","isScheduler","_Set","set","key","has","subscritionActions","wrapOperator","operator","operatorWrapper","observer","_subscrition","next","err","error","complete","res","Subscriber","action","subscrition","toSubscriber","add","source","uid","Subscription","_closed","_uid","_set","observers","closed","_unsubscribe","unsubscribe","clear","_add","push","splice","indexOf","getSymbolObservable","$$observable","Symbol","observable","symbolIteratorPonyfill","iterator","Set","Map","keys","getOwnPropertyNames","rxSubscriber","destinationOrNext","destination","bind","isStopped","readyState","_next","e","errorSource","errorValue","_error","_complete","args","emptySubscriber","observerOrNext","rxSubscriberSymbol","Observable","_subscribe","_isScalar","_trySubscribe","syncError","subscriber","ArrayObservable","array","scheduler","len","dispatch","index","count","EmptyObservable","ScalarObservable","of","pop","empty","ErrorObservable","throwObservable","PromiseObservable","promise","catch","fromPromise","ArrayLikeObservable","IteratorObservable","iteratorObject","SymbolIterator","TypeError","getIterator","done","return","result","StringIterator","idx","charAt","ArrayIterator","Notification","kind","hasValue","observe","nextOrObserver","do","throw","undefinedValueNotification","completeNotification","ObserveOnSubscriber","notification","scheduleMessage","createNext","createError","createComplete","FromObservable","ish","SymbolObservable","fromObservable","from","range","start","end","arr","doOperator","Action","AsyncAction","pending","recycleAsyncId","requestAsyncId","setInterval","flush","_execute","actions","AsapAction","scheduled","AsyncScheduler","active","execute","shift","AsapScheduler","asap","async","AnimationFrameAction","AnimationFrameScheduler","animationFrame","QueueAction","QueueScheduler","queue","delayOperator","absoluteDelay","delayFor","abs","DelaySubscriber","errored","message","_schedule","scheduleNotification","time","takeOperator","number","POSITIVE_INFINITY","filterOperator","predicate","context","mapOperator","project","OuterSubscriber","outerValue","innerValue","outerIndex","innerIndex","innerSub","InnerSubscriber","parent","notifyNext","notifyError","notifyComplete","subscribeToResult","outerSubscriber","item","obs","msg","mergeMapOperator","resultSelector","concurrent","MergeMapSubscriber","hasCompleted","buffer","_tryNext","_innerSub","_notifyResultSelector","remove","distinctUntilChangedOperator","compare","keySelector","selectable","a","b","emited","prevKey","Boolean","startWithOperator","hasScheduler","values","combineLatestOperator","others","combineLatestSubscriber","streams","initState","allHasValue","observeOnStreams","size","states","setNext","setComplete","data","apply","filter","_tryProject","forEach","subs","stream","lift","take","mergeMap","distinctUntilChanged","startWith","combineLatest","other","Subject","hasError","thrownError","subject","AnonymousSubject","subjectSubscription","dest","iterateObserver","slice","BehaviorSubject","_value","getValue","AsyncSubject","hasNext","ReplaySubject","bufferSize","windowTime","_bufferSize","_windowTime","_events","_getNow","_trimBufferThenGetEvents","events","subscription"],"mappings":"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"}