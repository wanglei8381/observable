{"version":3,"file":"rx.js","sources":["../src/utils/makeMap.js","../src/utils/type.js","../src/utils/immediate.js","../src/utils/animationFrame.js","../src/utils/ObjectUnsubscribedError.js","../src/utils/ArgumentOutOfRangeError.js","../src/Scheduler.js","../src/utils/isScheduler.js","../src/utils/Set.js","../src/utils/wrapOperator.js","../src/utils/identity.js","../src/Subscription.js","../src/symbol.js","../src/Subscriber.js","../src/Observable.js","../src/observables/ArrayObservable.js","../src/observables/EmptyObservable.js","../src/observables/ScalarObservable.js","../src/observables/of.js","../src/add/observable/of.js","../src/observables/empty.js","../src/add/observable/empty.js","../src/observables/ErrorObservable.js","../src/observables/throw.js","../src/add/observable/throw.js","../src/observables/PromiseObservable.js","../src/observables/fromPromise.js","../src/add/observable/fromPromise.js","../src/observables/ArrayLikeObservable.js","../src/observables/IteratorObservable.js","../src/Notification.js","../src/operators/observeOn.js","../src/observables/FromObservable.js","../src/observables/from.js","../src/add/observable/from.js","../src/add/observable/range.js","../src/schedulers/Action.js","../src/schedulers/AsyncAction.js","../src/schedulers/AsyncScheduler.js","../src/schedulers/async.js","../src/observables/TimerObservable.js","../src/observables/timer.js","../src/add/observable/timer.js","../src/observables/interval.js","../src/add/observable/interval.js","../src/OuterSubscriber.js","../src/InnerSubscriber.js","../src/utils/subscribeToResult.js","../src/operators/mergeMap.js","../src/observables/merge.js","../src/add/observable/merge.js","../src/observables/concat.js","../src/add/observable/concat.js","../src/observables/defer.js","../src/add/observable/defer.js","../src/observables/NeverObservable.js","../src/observables/never.js","../src/add/observable/never.js","../src/operators/do.js","../src/add/operator/do.js","../src/schedulers/AsapAction.js","../src/schedulers/AsapScheduler.js","../src/schedulers/asap.js","../src/schedulers/AnimationFrameAction.js","../src/schedulers/AnimationFrameScheduler.js","../src/schedulers/animationFrame.js","../src/schedulers/QueueAction.js","../src/schedulers/QueueScheduler.js","../src/schedulers/queue.js","../src/schedulers/index.js","../src/operators/delay.js","../src/add/operator/delay.js","../src/operators/take.js","../src/add/operator/take.js","../src/operators/filter.js","../src/add/operator/filter.js","../src/operators/map.js","../src/add/operator/map.js","../src/add/operator/mergeMap.js","../src/operators/distinctUntilChanged.js","../src/add/operator/distinctUntilChanged.js","../src/operators/startWith.js","../src/add/operator/startWith.js","../src/operators/combineLatest.js","../src/add/operator/combineLatest.js","../src/operators/mapTo.js","../src/add/operator/mapTo.js","../src/operators/mergeAll.js","../src/add/operator/mergeAll.js","../src/add/operator/merge.js","../src/operators/concat.js","../src/add/operator/concat.js","../src/operators/concatAll.js","../src/add/operator/concatAll.js","../src/operators/concatMap.js","../src/add/operator/concatMap.js","../src/operators/concatMapTo.js","../src/add/operator/concatMapTo.js","../src/operators/withLatestFrom.js","../src/add/operator/withLatestFrom.js","../src/Subject.js","../src/BehaviorSubject.js","../src/AsyncSubject.js","../src/ReplaySubject.js"],"sourcesContent":["export function makeMap (str, expectsLowerCase) {\n  const map = Object.create(null)\n  const list = str.split(',')\n  for (let i = 0; i < list.length; i++) {\n    map[list[i]] = true\n  }\n  return expectsLowerCase ? val => map[val.toLowerCase()] : val => map[val]\n}\n","import { makeMap } from './makeMap'\nconst objectProto = Object.prototype\nconst toString = obj => objectProto.toString.call(obj)\nconst viewClasses = [\n  'Int8Array',\n  'Uint8Array',\n  'Uint8ClampedArray',\n  'Int16Array',\n  'Uint16Array',\n  'Int32Array',\n  'Uint32Array',\n  'Float32Array',\n  'Float64Array'\n]\nconst viewClassesMap = makeMap(\n  viewClasses.map(clazz => `[object ${clazz}]`).join(',')\n)\nexport function isNull (obj) {\n  return obj === null\n}\n\nexport function isUndefined (obj) {\n  return obj === undefined\n}\n\nexport function isNil (obj) {\n  return obj == null\n}\n\nexport function isString (obj) {\n  const type = typeof obj\n  return type === 'string' || obj instanceof String\n}\n\nexport function isNumber (obj) {\n  const type = typeof obj\n  return type === 'number' || obj instanceof Number\n}\n\nexport function isBoolean (obj) {\n  return obj === true || obj === false || obj instanceof Boolean\n}\n\nexport function isSymbol (obj) {\n  const type = typeof obj\n  return type === 'symbol' || obj instanceof Symbol\n}\n\nexport function isObject (obj) {\n  const type = typeof obj\n  return obj != null && (type === 'object' || type === 'function')\n}\n\nexport function isObjectLike (obj) {\n  return obj != null && typeof obj === 'object'\n}\n\n/**\n *\n * @param obj {*}\n * @returns {boolean}\n * @example\n * eg1\n * isPlainObject(null) => false\n *\n * eg2\n * isPlainObject([1,2]) => false\n *\n * eg3\n * isPlainObject(Object.create(null)) => true\n *\n * eg4\n * function Foo(){}\n * isPlainObject(new Foo) => false\n */\nexport function isPlainObject (obj) {\n  // eg1,eg2\n  if (!isObjectLike(obj) || toString(obj) !== '[object Object]') {\n    return false\n  }\n  // eg3\n  const proto = Object.getPrototypeOf(obj)\n  if (proto === null) {\n    return true\n  }\n\n  // eg4\n  return proto.constructor === Object\n}\n\nexport function isArguments (obj) {\n  return isObjectLike(obj) && toString(obj) === '[object Arguments]'\n}\n\nexport function isArray (obj) {\n  return Array.isArray(obj)\n}\n\nexport function isArrayBuffer (obj) {\n  return toString(obj) === '[object ArrayBuffer]'\n}\n\nexport function isArrayBufferView (obj) {\n  return obj && viewClassesMap(Object.prototype.toString.call(obj))\n}\n\n// 2^53 - 1 数组下标从0开始，最大长度length - 1\nconst MAX_SAFE_INTEGER = 9007199254740991\n/**\n *\n * @param value {*}\n * @returns {boolean}\n * @example\n * eg1\n * isLength(1) => true\n *\n * eg2\n * isLength(-1) => false\n *\n * eg3\n * isLength(1.1) => false\n *\n * eg4\n * isLength(1.1) => false\n *\n * eg5\n * isLength(9007199254740992) => false\n *\n */\nexport function isLength (value) {\n  return (\n    typeof value === 'number' &&\n    value > -1 &&\n    value <= MAX_SAFE_INTEGER &&\n    value % 1 === 0\n  )\n}\n\nexport function isArrayLike (obj) {\n  return obj !== null && typeof obj !== 'function' && isLength(obj.length)\n}\n\nexport function isBuffer (obj) {\n  return Buffer.isBuffer(obj)\n}\n\nexport function isDate (obj) {\n  return isObjectLike(obj) && toString(obj) === '[object Date]'\n}\n\nexport function isElement (obj) {\n  return isObjectLike(obj) && obj.nodeType === 1\n}\n\nexport function isFunction (obj) {\n  if (!isObject(obj)) {\n    return false\n  }\n\n  const tag = toString(obj)\n  return (\n    tag === '[object Function]' ||\n    tag === '[object AsyncFunction]' ||\n    tag === '[object GeneratorFunction]' ||\n    tag === '[object Proxy]'\n  )\n}\n\nexport function isMap (obj) {\n  return isObjectLike(obj) && toString(obj) === '[object Map]'\n}\n\nexport function isSet (obj) {\n  return isObjectLike(obj) && toString(obj) === '[object Set]'\n}\n\nexport function isWeakMap (obj) {\n  return isObjectLike(obj) && toString(obj) === '[object WeakMap]'\n}\n\nexport function isWeakSet (obj) {\n  return isObjectLike(obj) && toString(obj) === '[object WeakSet]'\n}\n\nexport function isRegExp (obj) {\n  return isObjectLike(obj) && toString(obj) === '[object RegExp]'\n}\n\nexport function isError (obj) {\n  const tag = toString(obj)\n  return (\n    isObjectLike(obj) &&\n    (tag === '[object Error]' || tag === '[object DOMException]')\n  )\n}\n\nexport function isPromise (value) {\n  return (\n    value &&\n    typeof value.subscribe !== 'function' &&\n    typeof value.then === 'function'\n  )\n}\n","let id = 0\nconst cache = {}\nexport const setImmediate = cb => {\n  id++\n  cache[id] = cb\n  Promise.resolve().then(() => {\n    const handle = cache[id]\n    if (handle) {\n      handle()\n    }\n  })\n\n  return id\n}\n\nexport const clearImmediate = id => {\n  delete cache[id]\n}\n","/* eslint-disable no-undef */\nlet lastTime = 0\n\n// 之所以一个一个枚举是因为不能用上下文（微信小程序）\nfunction AnimationFrame () {\n  let raf\n  let caf\n  if (typeof requestAnimationFrame !== 'undefined') {\n    raf = requestAnimationFrame\n    caf = cancelAnimationFrame\n  } else if (typeof webkitRequestAnimationFrame !== 'undefined') {\n    raf = webkitRequestAnimationFrame\n    caf = webkitCancelAnimationFrame\n  } else if (typeof msRequestAnimationFrame !== 'undefined') {\n    raf = msRequestAnimationFrame\n    caf = msCancelAnimationFrame\n  } else if (typeof mozRequestAnimationFrame !== 'undefined') {\n    raf = mozRequestAnimationFrame\n    caf = mozCancelAnimationFrame\n  } else if (typeof oRequestAnimationFrame !== 'undefined') {\n    raf = oRequestAnimationFrame\n    caf = oCancelAnimationFrame\n  } else {\n    raf = function (callback) {\n      var currTime = new Date().getTime()\n      var timeToCall = Math.max(0, 16 - (currTime - lastTime))\n      var id = setTimeout(function () {\n        /* eslint-disable standard/no-callback-literal */\n        callback(currTime + timeToCall)\n      }, timeToCall)\n      lastTime = currTime + timeToCall\n      return id\n    }\n    caf = clearTimeout\n  }\n  return {\n    raf,\n    caf\n  }\n}\n\nconst { raf, caf } = AnimationFrame()\nexport const requestAnimationFrame = raf\nexport const cancelAnimationFrame = caf\n","export class ObjectUnsubscribedError extends Error {\n  constructor () {\n    super('object unsubscribed')\n    this.name = 'ObjectUnsubscribedError'\n    Object.setPrototypeOf(this, ObjectUnsubscribedError.prototype)\n  }\n}\n\nexport const throwObjectUnsubscribedError = () => {\n  throw new ObjectUnsubscribedError()\n}\n","export class ArgumentOutOfRangeError extends Error {\n  constructor () {\n    super('argument out of range')\n    this.name = 'ArgumentOutOfRangeError'\n    Object.setPrototypeOf(this, ArgumentOutOfRangeError.prototype)\n  }\n}\n","export class Scheduler {\n  constructor (SchedulerAction, now = Scheduler.now) {\n    this.SchedulerAction = SchedulerAction\n    this.now = now\n  }\n\n  // schedule是所有异步的入口，接受三个参数\n  // work: 需要执行的任务，delay：延迟多长时间执行，state：交给work的状态\n  // 每schedule一次都会生成一个action，action是Scheduler的执行单元\n  schedule (work, delay = 0, state) {\n    return new this.SchedulerAction(this, work).schedule(state, delay)\n  }\n\n  static now = Date.now\n}\n","import { Scheduler } from '../Scheduler'\nexport const isScheduler = val => {\n  return val != null && val instanceof Scheduler\n}\n","export class _Set {\n  constructor () {\n    this.set = Object.create(null)\n  }\n\n  add (key) {\n    this.set[key] = true\n  }\n\n  delete (key) {\n    if (this.has(key)) {\n      delete this.set[key]\n    }\n  }\n\n  has (key) {\n    return this.set[key] === true\n  }\n\n  clear () {\n    this.set = Object.create(null)\n  }\n}\n","import { toSubscriber, Subscriber } from '../Subscriber'\nimport { isFunction, isObject } from './type'\n\nconst subscritionActions = ['next', 'error', 'complete']\nexport function wrapOperator (operator) {\n  return function operatorWrapper (observer) {\n    let _subscrition = {\n      next (value) {\n        observer.next(value)\n      },\n\n      error (err) {\n        observer.error(err)\n      },\n\n      complete () {\n        observer.complete()\n      }\n    }\n\n    const res = operator(observer)\n    if (res === false) return\n    if (isFunction(res)) {\n      _subscrition.next = res\n    } else if (res instanceof Subscriber) {\n      _subscrition = res\n    } else if (isObject(res)) {\n      for (let i = 0; i < 3; i++) {\n        const action = subscritionActions[i]\n        if (isFunction(res[action])) {\n          _subscrition[action] = res[action]\n        }\n      }\n    }\n\n    const subscrition = toSubscriber(_subscrition)\n    observer.add(subscrition)\n    this.source.subscribe(subscrition)\n  }\n}\n","export const identity = $ => $\n","import { isFunction, _Set, isArray } from './utils'\n\nlet uid = 0\nexport class Subscription {\n  constructor () {\n    this._closed = false\n    this._uid = uid++\n    this._set = new _Set()\n    this.observers = []\n  }\n\n  unsubscribe () {\n    if (this.closed) return\n    if (this._unsubscribe) {\n      this._unsubscribe()\n    }\n    // _closed要在循环之前赋值，避免相互引用导致的死循环\n    this._closed = true\n    const observers = this.observers\n    for (let i = 0; i < observers.length; i++) {\n      const observer = observers[i]\n      if (observer.closed !== true) {\n        observer.unsubscribe()\n      }\n    }\n\n    this._set.clear()\n    this.observers = []\n  }\n\n  add (observer) {\n    // 在asObservable中会把自己加进来，要进行排除，不然在unsubscribe会造成死循环(bug：找了好久)\n    if (observer === this) return this\n\n    if (isFunction(observer)) {\n      this._add({\n        _uid: uid++,\n        unsubscribe: observer\n      })\n    } else if (observer instanceof Subscription) {\n      this._add(observer)\n    } else if (isArray(observer)) {\n      const list = observer\n      const length = list.length\n      for (let i = 0; i < length; i++) {\n        this.add(list[i])\n      }\n    }\n  }\n\n  _add (observer) {\n    const { _set, observers } = this\n    if (!_set.has(observer._uid)) {\n      _set.add(observer._uid)\n      observers.push(observer)\n    }\n  }\n\n  remove (observer) {\n    const { _set, observers } = this\n    if (observer && observer._uid && _set.has(observer._uid)) {\n      observers.splice(observers.indexOf(observer), 1)\n    }\n  }\n\n  get closed () {\n    return this._closed\n  }\n}\n","export function getSymbolObservable (key) {\n  let $$observable\n\n  if (typeof Symbol === 'function') {\n    if (Symbol.observable) {\n      $$observable = Symbol.observable\n    } else {\n      $$observable = Symbol(key)\n      Symbol.observable = $$observable\n    }\n  } else {\n    $$observable = '@@' + key\n  }\n\n  return $$observable\n}\n\nexport function symbolIteratorPonyfill () {\n  if (typeof Symbol === 'function') {\n    if (!Symbol.iterator) {\n      Symbol.iterator = Symbol('iterator polyfill')\n    }\n    return Symbol.iterator\n  } else {\n    // [for Mozilla Gecko 27-35:](https://mzl.la/2ewE1zC)\n    if (\n      typeof Set !== 'undefined' &&\n      typeof new Set()['@@iterator'] === 'function'\n    ) {\n      return '@@iterator'\n    }\n    // required for compatability with es6-shim\n    if (typeof Map !== 'undefined') {\n      let keys = Object.getOwnPropertyNames(Map.prototype)\n      for (let i = 0; i < keys.length; ++i) {\n        let key = keys[i]\n        // according to spec, Map.prototype[@@iterator] and Map.orototype.entries must be equal.\n        if (\n          key !== 'entries' &&\n          key !== 'size' &&\n          Map.prototype[key] === Map.prototype['entries']\n        ) {\n          return key\n        }\n      }\n    }\n    return '@@iterator'\n  }\n}\n\nexport const iterator = symbolIteratorPonyfill()\n\nexport const observable = getSymbolObservable('observable')\n\nexport const rxSubscriber = getSymbolObservable('rxSubscriber')\n","import { isNil, isFunction, isObjectLike } from './utils'\nimport { Subscription } from './Subscription'\nimport { rxSubscriber as rxSubscriberSymbol } from './symbol'\nexport class Subscriber extends Subscription {\n  constructor (destinationOrNext, error, complete) {\n    super()\n    if (isObjectLike(destinationOrNext)) {\n      this.destination = destinationOrNext\n    } else {\n      this.destination = {\n        next: destinationOrNext && destinationOrNext.bind(this),\n        error: error && error.bind(this),\n        complete: complete && complete.bind(this)\n      }\n    }\n\n    this.isStopped = false\n  }\n\n  next (val) {\n    if (this.isStopped) return\n    try {\n      this._next(val)\n    } catch (e) {\n      this.unsubscribe()\n      this.errorSource = 'next'\n      this.errorValue = e\n    }\n  }\n\n  error (e) {\n    if (this.isStopped) return\n    try {\n      this._error(e)\n    } catch (e) {\n      this.unsubscribe()\n      this.errorSource = 'error'\n      throw e\n    }\n  }\n\n  complete () {\n    if (this.isStopped) return\n    try {\n      this._complete()\n    } catch (e) {\n      this.unsubscribe()\n      this.errorSource = 'complete'\n      throw e\n    }\n  }\n\n  add (observer) {\n    if (this.isStopped) {\n      if (isFunction(observer)) {\n        observer()\n      } else if (observer instanceof Subscription) {\n        observer.unsubscribe()\n      }\n    } else {\n      super.add(observer)\n    }\n  }\n\n  _next (value) {\n    if (this.destination.next) {\n      this.destination.next(value)\n    }\n  }\n\n  _error (e) {\n    if (this.destination.error) {\n      this.destination.error(e)\n    } else {\n      this.unsubscribe()\n      this.errorSource = 'error'\n      throw e\n    }\n    this.unsubscribe()\n  }\n\n  _complete () {\n    if (this.destination.complete) {\n      this.destination.complete()\n    }\n    this.unsubscribe()\n  }\n\n  _unsubscribe () {\n    this.isStopped = true\n  }\n\n  static create (...args) {\n    return new Subscriber(...args)\n  }\n}\n\nexport const emptySubscriber = new Subscriber()\n\nexport function toSubscriber (observerOrNext, error, complete) {\n  let next = observerOrNext\n  if (isNil(observerOrNext)) return emptySubscriber\n  if (observerOrNext instanceof Subscriber) return observerOrNext\n  if (observerOrNext[rxSubscriberSymbol]) {\n    next = observerOrNext[rxSubscriberSymbol]()\n  }\n  return new Subscriber(next, error, complete)\n}\n","import { toSubscriber } from './Subscriber'\nimport { observable as $$observable } from './symbol'\nimport { wrapOperator } from './utils'\nexport class Observable {\n  constructor (subscribe) {\n    if (subscribe) {\n      this._subscribe = subscribe\n    }\n    // 是否只触发一次数据\n    this._isScalar = false\n  }\n\n  lift (operator) {\n    const observable = new Observable()\n    observable.source = this\n    observable.operator = wrapOperator(operator)\n    return observable\n  }\n\n  subscribe (observerOrNext, error, complete) {\n    const observer = toSubscriber(observerOrNext, error, complete)\n\n    if (this.operator) {\n      this.operator(observer)\n    } else if (this._subscribe) {\n      // 存在source，source当最数据源（如subject中的asObservable）\n      observer.add(\n        this.source ? this._subscribe(observer) : this._trySubscribe(observer)\n      )\n    }\n\n    // 当在next中出错时，抛出错误对象\n    if (observer.errorValue && observer.errorSource === 'next') {\n      throw observer.errorValue\n    }\n\n    return observer\n  }\n\n  // 在订阅时出错要通知error，但不会抛出\n  _trySubscribe (observer) {\n    try {\n      return this._subscribe(observer)\n    } catch (e) {\n      observer.syncError = e\n      observer.error(e)\n    }\n  }\n\n  _subscribe (observer) {\n    return this.source.subscribe(observer)\n  }\n\n  [$$observable] () {\n    return this\n  }\n\n  static create (subscriber) {\n    return new Observable(subscriber)\n  }\n}\n","import { Observable } from '../Observable'\nexport class ArrayObservable extends Observable {\n  constructor (array, scheduler) {\n    super()\n    this.array = array\n    this.scheduler = scheduler\n  }\n\n  _subscribe (observer) {\n    const { array, scheduler } = this\n    const len = array.length\n    if (scheduler) {\n      scheduler.schedule(ArrayObservable.dispatch, 0, {\n        array,\n        observer,\n        index: 0,\n        count: len\n      })\n    } else {\n      for (let i = 0; i < len; i++) {\n        observer.next(array[i])\n      }\n      observer.complete()\n    }\n  }\n\n  static create (array, scheduler) {\n    return new ArrayObservable(array, scheduler)\n  }\n\n  static dispatch (state) {\n    const { observer, index, array, count } = state\n    // 数据发送完毕\n    if (index >= count) {\n      observer.complete()\n      return\n    }\n    // 在observer关闭以后也可以发送\n    observer.next(array[index])\n    if (observer.closed) return\n    state.index = index + 1\n    // 继续调用后续数据, this会绑定到scheduler的action上\n    this.schedule(state)\n  }\n}\n","import { Observable } from '../Observable'\nexport class EmptyObservable extends Observable {\n  constructor (scheduler) {\n    super()\n    this.scheduler = scheduler\n  }\n\n  _subscribe (observer) {\n    const scheduler = this.scheduler\n\n    if (scheduler) {\n      return scheduler.schedule(EmptyObservable.dispatch, 0, { observer })\n    } else {\n      observer.complete()\n    }\n  }\n\n  static create (scheduler) {\n    return new EmptyObservable(scheduler)\n  }\n\n  static dispatch ({ observer }) {\n    observer.complete()\n  }\n}\n","import { Observable } from '../Observable'\nexport class ScalarObservable extends Observable {\n  constructor (value, scheduler) {\n    super()\n    this.value = value\n    this.scheduler = scheduler\n  }\n\n  _subscribe (observer) {\n    const { value, scheduler } = this\n    if (scheduler) {\n      scheduler.schedule(ScalarObservable.dispatch, 0, {\n        observer,\n        value\n      })\n    } else {\n      observer.next(value)\n      observer.complete()\n    }\n  }\n\n  static create (array, scheduler) {\n    return new ScalarObservable(array, scheduler)\n  }\n\n  static dispatch (state) {\n    const { observer, value } = state\n    observer.next(value)\n    observer.complete()\n  }\n}\n","import { isScheduler } from '../utils'\nimport { ArrayObservable } from './ArrayObservable'\nimport { EmptyObservable } from './EmptyObservable'\nimport { ScalarObservable } from './ScalarObservable'\nexport const of = (...args) => {\n  let scheduler = args[args.length - 1]\n  if (isScheduler(scheduler)) {\n    args.pop()\n  } else {\n    scheduler = null\n  }\n  const length = args.length\n  if (length === 1) {\n    return new ScalarObservable(args[0], scheduler)\n  } else if (length > 1) {\n    return new ArrayObservable(args, scheduler)\n  }\n  return new EmptyObservable(scheduler)\n}\n","import { Observable } from '../../Observable'\nimport { of } from '../../observables/of'\nObservable.of = of\n","import { EmptyObservable } from './EmptyObservable'\nexport const empty = EmptyObservable.create\n","import { Observable } from '../../Observable'\nimport { empty } from '../../observables/empty'\nObservable.empty = empty\n","import { Observable } from '../Observable'\nexport class ErrorObservable extends Observable {\n  constructor (error, scheduler) {\n    super()\n    this.error = error\n    this.scheduler = scheduler\n  }\n\n  _subscribe (observer) {\n    const scheduler = this.scheduler\n    const error = this.error\n    if (scheduler) {\n      return scheduler.schedule(ErrorObservable.dispatch, 0, {\n        observer,\n        error\n      })\n    } else {\n      observer.error(error)\n    }\n  }\n\n  static create (scheduler) {\n    return new ErrorObservable(scheduler)\n  }\n\n  static dispatch ({ observer, error }) {\n    observer.error(error)\n  }\n}\n","import { ErrorObservable } from './ErrorObservable'\nexport const throwObservable = ErrorObservable.create\n","import { Observable } from '../../Observable'\nimport { throwObservable } from '../../observables/throw'\nObservable.throw = throwObservable\n","import { Observable } from '../Observable'\n\nexport class PromiseObservable extends Observable {\n  constructor (promise, scheduler) {\n    super()\n    this.promise = promise\n    this.scheduler = scheduler\n  }\n\n  _subscribe (observer) {\n    const { promise, scheduler } = this\n    if (scheduler) {\n      if (this._isScalar) {\n        scheduler.schedule(PromiseObservable.dispatch, 0, {\n          observer,\n          value: this.value\n        })\n      } else {\n        promise\n          .then(\n            value => {\n              this._isScalar = true\n              this.value = value\n              scheduler.schedule(PromiseObservable.dispatch, 0, {\n                observer,\n                value\n              })\n            },\n            error => {\n              scheduler.schedule(\n                ({ observer, error }) => {\n                  observer.error(error)\n                },\n                0,\n                { observer, error }\n              )\n            }\n          )\n          .catch(e => {\n            // escape the promise trap, throw unhandled errors\n            setTimeout(() => {\n              throw e\n            })\n          })\n      }\n    } else {\n      // 已经执行过\n      if (this._isScalar) {\n        observer.next(this.value)\n        observer.complete()\n      } else {\n        promise\n          .then(\n            value => {\n              this._isScalar = true\n              this.value = value\n              observer.next(value)\n              observer.complete()\n            },\n            e => {\n              observer.error(e)\n            }\n          )\n          .catch(e => {\n            // escape the promise trap, throw unhandled errors\n            setTimeout(() => {\n              throw e\n            })\n          })\n      }\n    }\n  }\n\n  static create (promise, scheduler) {\n    return new PromiseObservable(promise, scheduler)\n  }\n\n  static dispatch ({ observer, value }) {\n    observer.next(value)\n    observer.complete()\n  }\n}\n","import { PromiseObservable } from './PromiseObservable'\nexport const fromPromise = PromiseObservable.create\n","import { Observable } from '../../Observable'\nimport { fromPromise } from '../../observables/fromPromise'\nObservable.fromPromise = fromPromise\n","import { Observable } from '../Observable'\nimport { EmptyObservable } from './EmptyObservable'\nimport { ScalarObservable } from './ScalarObservable'\nexport class ArrayLikeObservable extends Observable {\n  constructor (array, scheduler) {\n    super()\n    this.array = array\n    this.scheduler = scheduler\n  }\n\n  _subscribe (observer) {\n    const { array, scheduler } = this\n    const len = array.length\n    if (scheduler) {\n      scheduler.schedule(ArrayLikeObservable.dispatch, 0, {\n        array,\n        observer,\n        index: 0,\n        count: len\n      })\n    } else {\n      for (let i = 0; i < len; i++) {\n        observer.next(array[i])\n      }\n      observer.complete()\n    }\n  }\n\n  static create (array, scheduler) {\n    const length = array.length\n    if (length === 0) {\n      return new EmptyObservable(scheduler)\n    }\n\n    if (length === 1) {\n      return new ScalarObservable(array[0], scheduler)\n    }\n\n    return new ArrayLikeObservable(array, scheduler)\n  }\n\n  static dispatch (state) {\n    const { observer, index, array, count } = state\n    // 数据发送完毕\n    if (index >= count) {\n      observer.complete()\n      return\n    }\n    // 在observer关闭以后也可以发送\n    observer.next(array[index])\n    if (observer.closed) return\n    state.index = index + 1\n    // 继续调用后续数据, this会绑定到scheduler的action上\n    this.schedule(state)\n  }\n}\n","import { Observable } from '../Observable'\nimport { iterator as SymbolIterator } from '../symbol'\nexport class IteratorObservable extends Observable {\n  constructor (iteratorObject, scheduler) {\n    super()\n    if (iteratorObject == null) {\n      throw new Error('iterator cannot be null.')\n    } else if (!iteratorObject[SymbolIterator]) {\n      throw new TypeError('object is not iterable')\n    }\n    this.iteratorObject = iteratorObject\n    this.scheduler = scheduler\n  }\n\n  _subscribe (observer) {\n    const { iteratorObject, scheduler } = this\n    const iterator = getIterator(iteratorObject)\n    if (scheduler) {\n      return scheduler.schedule(IteratorObservable.dispatch, 0, {\n        observer,\n        iterator,\n        index: 0\n      })\n    } else {\n      do {\n        const res = iterator.next()\n        if (res.done) {\n          observer.complete()\n          break\n        } else {\n          observer.next(res.value)\n        }\n        // 不理解\n        if (observer.closed) {\n          if (typeof iterator.return === 'function') {\n            iterator.return()\n          }\n          break\n        }\n      } while (true)\n    }\n  }\n\n  static create (iterator, scheduler) {\n    return new IteratorObservable(iterator, scheduler)\n  }\n\n  static dispatch (state) {\n    const { observer, iterator, index } = state\n    // if (hasError) {\n    //   observer.error(error)\n    //   return\n    // }\n\n    const result = iterator.next()\n    if (result.done) {\n      observer.complete()\n      return\n    }\n\n    observer.next(result.value)\n    state.index = index + 1\n\n    if (observer.closed) {\n      if (typeof iterator.return === 'function') {\n        iterator.return()\n      }\n      return\n    }\n\n    this.schedule(state)\n  }\n}\n\nclass StringIterator {\n  constructor (str, idx = 0, len = str.length) {\n    this.str = str\n    this.idx = idx\n    this.len = len\n  }\n\n  next () {\n    return this.idx < this.len\n      ? { done: false, value: this.str.charAt(this.idx++) }\n      : { done: true, value: undefined }\n  }\n\n  [SymbolIterator] () {\n    return this\n  }\n}\n\nclass ArrayIterator {\n  constructor (array, idx = 0, len = array.length) {\n    this.array = array\n    this.idx = idx\n    this.len = len\n  }\n\n  next () {\n    return this.idx < this.len\n      ? { done: false, value: this.array[this.idx++] }\n      : { done: true, value: undefined }\n  }\n\n  [SymbolIterator] () {\n    return this\n  }\n}\n\nfunction getIterator (obj) {\n  const i = obj[SymbolIterator]\n  if (!i && typeof obj === 'string') {\n    return new StringIterator(obj)\n  }\n  if (!i && obj.length !== undefined) {\n    return new ArrayIterator(obj)\n  }\n  if (!i) {\n    throw new TypeError('object is not iterable')\n  }\n  return obj[SymbolIterator]()\n}\n","import { isObjectLike, isUndefined } from './utils'\nimport { Observable } from './Observable'\nexport class Notification {\n  constructor (kind, value, error) {\n    this.kind = kind\n    this.value = value\n    this.error = error\n    this.hasValue = kind === 'N'\n  }\n\n  observe (observer) {\n    switch (this.kind) {\n      case 'N':\n        return observer.next && observer.next(this.value)\n      case 'E':\n        return observer.error && observer.error(this.error)\n      case 'C':\n        return observer.complete && observer.complete()\n    }\n  }\n\n  do (next, error, complete) {\n    this.observe({\n      next,\n      error,\n      complete\n    })\n  }\n\n  accept (nextOrObserver, error, complete) {\n    if (isObjectLike(nextOrObserver)) {\n      this.observe(nextOrObserver)\n    } else {\n      this.do(nextOrObserver, error, complete)\n    }\n  }\n\n  toObservable () {\n    const kind = this.kind\n    switch (kind) {\n      case 'N':\n        return Observable.of(this.value)\n      case 'E':\n        return Observable.throw(this.error)\n      case 'C':\n        return Observable.empty()\n    }\n    throw new Error('unexpected notification kind value')\n  }\n\n  static completeNotification = new Notification('C')\n  static undefinedValueNotification = new Notification('N', undefined)\n\n  static createNext (value) {\n    return isUndefined(value)\n      ? Notification.undefinedValueNotification\n      : new Notification('N', value)\n  }\n\n  static createError (e) {\n    return new Notification('E', undefined, e)\n  }\n\n  static createComplete () {\n    return Notification.completeNotification\n  }\n}\n","import { Subscriber } from '../Subscriber'\nimport { Notification } from '../Notification'\nexport class ObserveOnSubscriber extends Subscriber {\n  constructor (destination, scheduler, delay = 0) {\n    super(destination)\n    this.scheduler = scheduler\n    this.delay = delay\n  }\n\n  static dispatch ({ notification, destination }) {\n    notification.observe(destination)\n    // this: scheduler执行中的action\n    this.unsubscribe()\n  }\n\n  scheduleMessage (notification) {\n    this.add(\n      this.scheduler.schedule(ObserveOnSubscriber.dispatch, this.delay, {\n        notification,\n        destination: this.destination\n      })\n    )\n  }\n\n  _next (value) {\n    this.scheduleMessage(Notification.createNext(value))\n  }\n\n  _error (e) {\n    this.scheduleMessage(Notification.createError(e))\n  }\n\n  _complete () {\n    this.scheduleMessage(Notification.createComplete())\n  }\n}\n","import { Observable } from '../Observable'\nimport { ArrayObservable } from './ArrayObservable'\nimport { ArrayLikeObservable } from './ArrayLikeObservable'\nimport { PromiseObservable } from './PromiseObservable'\nimport { IteratorObservable } from './IteratorObservable'\nimport { ObserveOnSubscriber } from '../operators/observeOn'\nimport {\n  observable as SymbolObservable,\n  iterator as SymbolIterator\n} from '../symbol'\nimport { isFunction, isArrayLike, isPromise, isArray, isString } from '../utils'\n\nexport class FromObservable extends Observable {\n  constructor (ish, scheduler) {\n    super()\n    this.ish = ish\n    this.scheduler = scheduler\n  }\n\n  _subscribe (observer) {\n    const { ish, scheduler } = this\n    if (scheduler == null) {\n      return ish[SymbolObservable]().subscribe(observer)\n    } else {\n      return ish[SymbolObservable]().subscribe(\n        new ObserveOnSubscriber(observer, scheduler, 0)\n      )\n    }\n  }\n\n  static create (ish, scheduler) {\n    if (ish != null) {\n      if (isFunction(ish[SymbolObservable])) {\n        if (ish instanceof Observable && !scheduler) {\n          return ish\n        }\n        return new FromObservable(ish, scheduler)\n      }\n\n      if (isArray(ish)) {\n        return new ArrayObservable(ish, scheduler)\n      }\n\n      if (isPromise(ish)) {\n        return new PromiseObservable(ish, scheduler)\n      }\n\n      if (isFunction(ish[SymbolIterator]) || isString(ish)) {\n        return new IteratorObservable(ish, scheduler)\n      }\n\n      if (isArrayLike(ish)) {\n        return ArrayLikeObservable.create(ish, scheduler)\n      }\n    }\n    throw new TypeError(\n      ((ish !== null && typeof ish) || ish) + ' is not observable'\n    )\n  }\n}\n","import { FromObservable } from './FromObservable'\nexport const fromObservable = FromObservable.create\n","import { fromObservable } from '../../observables/from'\nimport { Observable } from '../../Observable'\nObservable.from = fromObservable\n","import { Observable } from '../../Observable'\nimport { ArrayObservable } from '../../observables/ArrayObservable'\nObservable.range = function (start, end, scheduler) {\n  const arr = []\n  for (let i = start; i <= end; i++) {\n    arr.push(i)\n  }\n  return new ArrayObservable(arr, scheduler)\n}\n","import { Subscription } from '../Subscription'\n\nexport class Action extends Subscription {\n  constructor (scheduler, work) {\n    super()\n    this.scheduler = scheduler\n    this.work = work\n  }\n\n  // 该方法需要在子类中重写\n  schedule (state, delay) {\n    return this\n  }\n}\n","import { Action } from './Action'\n\nexport class AsyncAction extends Action {\n  id = null\n  state = undefined\n  delay = 0\n  pending = false\n\n  schedule (state, delay = 0) {\n    if (this.closed) return this\n\n    this.state = state\n    this.delay = delay\n    this.pending = true\n    let { scheduler, id } = this\n    if (id != null) {\n      id = this.recycleAsyncId(scheduler, id, delay)\n    }\n    if (!id) {\n      id = this.requestAsyncId(scheduler, id, delay)\n    }\n    this.id = id\n    return this\n  }\n\n  recycleAsyncId (scheduler, id, delay) {\n    if (delay !== null && this.delay === delay && this.pending === false) {\n      return id\n    }\n    clearInterval(id)\n    return undefined\n  }\n\n  requestAsyncId (scheduler, id, delay) {\n    return setInterval(scheduler.flush.bind(scheduler, this), delay)\n  }\n\n  execute (state) {\n    if (this.closed) {\n      return new Error('executing a cancelled action')\n    }\n    this.pending = false\n    const error = this._execute(state)\n    if (error) {\n      return error\n    } else if (this.pending === false && this.id != null) {\n      this.id = this.recycleAsyncId(this.scheduler, this.id, null)\n    }\n  }\n\n  _execute (state) {\n    try {\n      this.work(state)\n    } catch (e) {\n      this.unsubscribe()\n      return e\n    }\n  }\n\n  _unsubscribe () {\n    const id = this.id\n    const scheduler = this.scheduler\n    const actions = scheduler.actions\n    const index = actions.indexOf(this)\n\n    this.work = null\n    this.state = null\n    this.pending = false\n    this.scheduler = null\n\n    if (index !== -1) {\n      actions.splice(index, 1)\n    }\n\n    if (id != null) {\n      this.id = this.recycleAsyncId(scheduler, id, null)\n    }\n\n    this.delay = null\n  }\n}\n","import { Scheduler } from '../Scheduler'\nexport class AsyncScheduler extends Scheduler {\n  actions = []\n  active = false\n  scheduled = undefined\n\n  flush (action) {\n    const { actions } = this\n    // 在schedule中继续调用schedule，如果schedule是同步的（QueueScheduler），只需要添加队列中等待执行即可\n    if (this.active) {\n      actions.push(action)\n      return\n    }\n    this.active = true\n    let error\n    do {\n      if ((error = action.execute(action.state, action.delay))) {\n        break\n      }\n    } while ((action = actions.shift()))\n    this.active = false\n    if (error) {\n      while ((action = actions.shift())) {\n        action.unsubscribe()\n      }\n      throw error\n    }\n  }\n}\n","import { AsyncAction } from './AsyncAction'\nimport { AsyncScheduler } from './AsyncScheduler'\nexport const async = new AsyncScheduler(AsyncAction)\n","import { Observable } from '../Observable'\nimport { async } from '../schedulers/async'\nimport { isNumber, isScheduler, isDate } from '../utils'\n\nexport class TimerObservable extends Observable {\n  constructor (dueTime = 0, period, scheduler) {\n    super()\n\n    this.period = -1\n    if (isNumber(period)) {\n      this.period = period\n    } else if (isScheduler(period)) {\n      scheduler = period\n    }\n\n    this.scheduler = isScheduler(scheduler) ? scheduler : async\n\n    this.dueTime = isDate(dueTime) ? +dueTime - scheduler.now() : dueTime\n  }\n\n  _subscribe (observer) {\n    return this.scheduler.schedule(TimerObservable.dispatch, this.dueTime, {\n      index: 0,\n      observer,\n      period: this.period\n    })\n  }\n\n  static dispatch (state) {\n    const { observer, period, index } = state\n    observer.next(index)\n    if (observer.closed) return\n    if (period === -1) return observer.complete()\n    state.index = index + 1\n    this.schedule(state, period)\n  }\n\n  static create (initialDelay, period, scheduler) {\n    return new TimerObservable(initialDelay, period, scheduler)\n  }\n}\n","import { TimerObservable } from './TimerObservable'\nexport const timer = TimerObservable.create\n","import { Observable } from '../../Observable'\nimport { timer } from '../../observables/timer'\nObservable.timer = timer\n","import { TimerObservable } from './TimerObservable'\n\nexport const interval = (period, scheduler) => {\n  period = period < 0 ? 0 : period\n  return TimerObservable.create(period, period, scheduler)\n}\n","import { Observable } from '../../Observable'\nimport { interval } from '../../observables/interval'\nObservable.interval = interval\n","import { Subscriber } from './Subscriber'\n\nexport class OuterSubscriber extends Subscriber {\n  notifyNext (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n    this.destination.next(innerValue)\n  }\n\n  notifyError (error, innerSub) {\n    this.destination.error(error)\n  }\n\n  notifyComplete (innerSub) {\n    this.destination.complete()\n  }\n}\n","import { Subscriber } from './Subscriber'\n\nexport class InnerSubscriber extends Subscriber {\n  constructor (parent, outerValue, outerIndex) {\n    super()\n    this.parent = parent\n    this.outerValue = outerValue\n    this.outerIndex = outerIndex\n    this.index = 0\n  }\n\n  _next (value) {\n    this.parent.notifyNext(\n      this.outerValue,\n      value,\n      this.outerIndex,\n      this.index++,\n      this\n    )\n  }\n\n  _error (error) {\n    this.parent.notifyError(error, this)\n    this.unsubscribe()\n  }\n\n  _complete () {\n    this.parent.notifyComplete(this)\n    this.unsubscribe()\n  }\n}\n","import {\n  iterator as SymbolIterator,\n  observable as SymbolObservable\n} from '../symbol'\nimport { isObject, isArrayLike, isPromise } from './type'\nimport { Observable } from '../Observable'\nimport { InnerSubscriber } from '../InnerSubscriber'\nexport function subscribeToResult (\n  outerSubscriber,\n  result,\n  outerValue,\n  outerIndex\n) {\n  const destination = new InnerSubscriber(\n    outerSubscriber,\n    outerValue,\n    outerIndex\n  )\n  if (destination.closed) return null\n  if (result instanceof Observable) {\n    if (result._isScalar) {\n      destination.next(result.value)\n      destination.complete()\n      return null\n    } else {\n      return result.subscribe(destination)\n    }\n  } else if (isArrayLike(result)) {\n    for (let i = 0, len = result.length; i < len && !destination.closed; i++) {\n      destination.next(result[i])\n    }\n    if (!destination.closed) {\n      destination.complete()\n    }\n  } else if (isPromise(result)) {\n    result\n      .then(\n        value => {\n          if (!destination.closed) {\n            destination.next(value)\n            destination.complete()\n          }\n        },\n        err => destination.error(err)\n      )\n      .catch(err => {\n        setTimeout(() => {\n          throw err\n        })\n      })\n    return destination\n  } else if (result && typeof result[SymbolIterator] === 'function') {\n    const iterator = result[SymbolIterator]()\n    do {\n      let item = iterator.next()\n      if (item.done) {\n        destination.complete()\n        break\n      }\n      destination.next(item.value)\n      if (destination.closed) {\n        break\n      }\n    } while (true)\n  } else if (result && typeof result[SymbolObservable] === 'function') {\n    const obs = result[SymbolObservable]()\n    if (typeof obs.subscribe !== 'function') {\n      destination.error(\n        new TypeError(\n          'Provided object does not correctly implement Symbol.observable'\n        )\n      )\n    } else {\n      return obs.subscribe(\n        new InnerSubscriber(outerSubscriber, outerValue, outerIndex)\n      )\n    }\n  } else {\n    const value = isObject(result) ? 'an invalid object' : `'${result}'`\n    const msg =\n      `You provided ${value} where a stream was expected.` +\n      ' You can provide an Observable, Promise, Array, or Iterable.'\n    destination.error(new TypeError(msg))\n  }\n  return null\n}\n","import { OuterSubscriber } from '../OuterSubscriber'\nimport { isNumber, identity } from '../utils'\nimport { subscribeToResult } from '../utils/subscribeToResult'\n\n/**\n * 由当前流触发多个流按时间穿插合并到一起\n * 具体用途：\n * 1: 当多个流做同样的事时，可以进行组合，比如小程序中列表页面刷新来自手动下来、进入页面、动态添加数据，可以组合成一个\n *\n *\n 触发时间节点\n hot: 'a---b-----------c-------d-------|       '\n a_c: '----a---a---a---(a|)                    '\n b_c: '    ----b---b---(b|)                    '\n c_c: '                ----c---c---c---c---(c|)'\n d_c: '                        ----(d|)        '\n exp: '----a---(ab)(ab)(ab)c---c---(cd)c---(c|)'\n sub: '^                                   !   '\n *\n * @param project 待合并的流\n * @param resultSelector 对流的值进行处理\n * @param concurrent 同时并发的数量\n * @returns {function(*=): MergeMapSubscriber}\n */\nexport function mergeMapOperator (\n  project = identity,\n  resultSelector,\n  concurrent = Number.POSITIVE_INFINITY\n) {\n  if (isNumber(resultSelector)) {\n    concurrent = resultSelector\n    resultSelector = null\n  }\n  return observer =>\n    new MergeMapSubscriber(observer, project, resultSelector, concurrent)\n}\n\nclass MergeMapSubscriber extends OuterSubscriber {\n  constructor (destination, project, resultSelector, concurrent) {\n    super(destination)\n    this.project = project\n    this.resultSelector = resultSelector\n    this.concurrent = concurrent\n    this.index = 0\n    this.hasCompleted = false\n    this.buffer = []\n    this.active = 0\n  }\n\n  _next (value) {\n    if (this.active < this.concurrent) {\n      this._tryNext(value)\n    } else {\n      this.buffer.push(value)\n    }\n  }\n\n  _tryNext (value) {\n    try {\n      const index = this.index++\n      const result = this.project(value, index)\n      this.active++\n      this._innerSub(result, value, index)\n    } catch (e) {\n      super._error(e)\n    }\n  }\n\n  _innerSub (ish, value, index) {\n    this.add(subscribeToResult(this, ish, value, index))\n  }\n\n  _complete () {\n    this.hasCompleted = true\n    // 所有的都结束了\n    if (this.active === 0 && this.buffer.length === 0) {\n      this.destination.complete()\n    }\n  }\n\n  notifyNext (outerValue, innerValue, outerIndex, innerIndex) {\n    if (this.resultSelector) {\n      this._notifyResultSelector(outerValue, innerValue, outerIndex, innerIndex)\n    } else {\n      this.destination.next(innerValue)\n    }\n  }\n\n  _notifyResultSelector (outerValue, innerValue, outerIndex, innerIndex) {\n    try {\n      const result = this.resultSelector(\n        outerValue,\n        innerValue,\n        outerIndex,\n        innerIndex\n      )\n      this.destination.next(result)\n    } catch (err) {\n      this.destination.error(err)\n    }\n  }\n\n  notifyComplete (innerSub) {\n    const buffer = this.buffer\n    this.remove(innerSub)\n    this.active--\n    if (buffer.length > 0) {\n      this._next(buffer.shift())\n    } else if (this.active === 0 && this.hasCompleted) {\n      this.destination.complete()\n    }\n  }\n}\n","import { isScheduler, isNumber } from '../utils'\nimport { Observable } from '../Observable'\nimport { mergeMapOperator as mergeMap } from '../operators/mergeMap'\nimport { ArrayObservable } from './ArrayObservable'\nexport const merge = function (...observables) {\n  let scheduler = observables[observables.length - 1]\n  if (isScheduler(scheduler)) {\n    observables.pop()\n  } else {\n    scheduler = null\n  }\n\n  let concurrent = observables[observables.length - 1]\n  if (isNumber(concurrent)) {\n    observables.pop()\n  } else {\n    concurrent = Number.POSITIVE_INFINITY\n  }\n\n  if (\n    scheduler === null &&\n    observables.length === 1 &&\n    observables[0] instanceof Observable\n  ) {\n    return observables[0]\n  }\n\n  return new ArrayObservable(observables, scheduler).lift(\n    mergeMap(undefined, undefined, concurrent)\n  )\n}\n","import { Observable } from '../../Observable'\nimport { merge } from '../../observables/merge'\nObservable.merge = merge\n","import { merge } from '../observables/merge'\nimport { fromObservable } from './from'\nimport { isScheduler } from '../utils'\n\nexport const concat = function (...observables) {\n  const length = observables.length\n  if (length === 1) {\n    return fromObservable(observables[0])\n  }\n\n  if (isScheduler(observables[length - 1])) {\n    observables.splice(length - 1, 0, 1)\n  } else {\n    observables.push(1)\n  }\n\n  return merge(...observables)\n}\n","import { Observable } from '../../Observable'\nimport { concat } from '../../observables/concat'\nObservable.concat = concat\n","import { Observable } from '../Observable'\nimport { OuterSubscriber } from '../OuterSubscriber'\nimport { subscribeToResult } from '../utils/subscribeToResult'\nexport class DeferObservable extends Observable {\n  constructor (observableFactory) {\n    super()\n    this.observableFactory = observableFactory\n  }\n\n  _subscribe (subscriber) {\n    return new DeferSubscriber(subscriber, this.observableFactory)\n  }\n\n  static create (observableFactory) {\n    return new DeferObservable(observableFactory)\n  }\n}\n\nclass DeferSubscriber extends OuterSubscriber {\n  constructor (destination, factory) {\n    super(destination)\n    this.factory = factory\n    this.tryDefer()\n  }\n\n  tryDefer () {\n    try {\n      this._callFactory()\n    } catch (err) {\n      this._error(err)\n    }\n  }\n\n  _callFactory () {\n    const result = this.factory()\n    if (result) {\n      this.add(subscribeToResult(this, result))\n    }\n  }\n}\n","import { Observable } from '../../Observable'\nimport { DeferObservable } from '../../observables/defer'\nObservable.defer = DeferObservable.create\n","import { Observable } from '../Observable'\n\nexport class NeverObservable extends Observable {\n  static create () {\n    return new NeverObservable()\n  }\n\n  _subscribe () {}\n}\n","import { NeverObservable } from './NeverObservable'\nexport const never = NeverObservable.create\n","import { Observable } from '../../Observable'\nimport { never } from '../../observables/never'\nObservable.never = never\n","export const doOperator = (next, error, complete) => observer => ({\n  next (val) {\n    next && next(val)\n    observer.next(val)\n  },\n\n  error (e) {\n    error && error(e)\n    observer.error(e)\n  },\n\n  complete () {\n    complete && complete()\n    observer.complete()\n  }\n})\n","import { doOperator } from '../../operators/do'\nimport { Observable } from '../../Observable'\n\nObservable.prototype.do = function (nextOrObserver, error, complete) {\n  return this.lift(doOperator(nextOrObserver, error, complete))\n}\n","import { setImmediate, clearImmediate } from '../utils'\nimport { AsyncAction } from './AsyncAction'\nexport class AsapAction extends AsyncAction {\n  requestAsyncId (scheduler, id, delay = 0) {\n    if (delay != null && delay > 0) {\n      return super.requestAsyncId(scheduler, id, delay)\n    }\n    scheduler.actions.push(this)\n    return (\n      scheduler.scheduled ||\n      (scheduler.scheduled = setImmediate(\n        scheduler.flush.bind(scheduler, null)\n      ))\n    )\n  }\n\n  recycleAsyncId (scheduler, id, delay = 0) {\n    if ((delay !== null && delay > 0) || (delay === null && this.delay > 0)) {\n      return super.recycleAsyncId(scheduler, id, delay)\n    }\n\n    if (scheduler.actions.length === 0) {\n      clearImmediate(id)\n      scheduler.scheduled = undefined\n    }\n\n    return undefined\n  }\n}\n","import { AsyncScheduler } from './AsyncScheduler'\nexport class AsapScheduler extends AsyncScheduler {\n  flush (action) {\n    this.active = true\n    this.scheduled = undefined\n    const actions = this.actions\n    let error\n    action = action || actions.shift()\n    do {\n      if ((error = action.execute(action.state, action.delay))) break\n    } while ((action = actions.shift()))\n\n    this.active = false\n\n    if (error) {\n      while ((action = actions.shift())) {\n        action.unsubscribe()\n      }\n      throw error\n    }\n  }\n}\n","import { AsapAction } from './AsapAction'\nimport { AsapScheduler } from './AsapScheduler'\nexport const asap = new AsapScheduler(AsapAction)\n","import { requestAnimationFrame, cancelAnimationFrame } from '../utils'\nimport { AsyncAction } from './AsyncAction'\nexport class AnimationFrameAction extends AsyncAction {\n  requestAsyncId (scheduler, id, delay = 0) {\n    if (delay != null && delay > 0) {\n      return super.requestAsyncId(scheduler, id, delay)\n    }\n    scheduler.actions.push(this)\n    return (\n      scheduler.scheduled ||\n      (scheduler.scheduled = requestAnimationFrame(\n        scheduler.flush.bind(scheduler, null)\n      ))\n    )\n  }\n\n  recycleAsyncId (scheduler, id, delay = 0) {\n    if ((delay !== null && delay > 0) || (delay === null && this.delay > 0)) {\n      return super.recycleAsyncId(scheduler, id, delay)\n    }\n\n    if (scheduler.actions.length === 0) {\n      cancelAnimationFrame(id)\n      scheduler.scheduled = undefined\n    }\n\n    return undefined\n  }\n}\n","import { AsyncScheduler } from './AsyncScheduler'\nexport class AnimationFrameScheduler extends AsyncScheduler {\n  flush (action) {\n    this.active = true\n    this.scheduled = undefined\n    const actions = this.actions\n    let error\n    action = action || actions.shift()\n    do {\n      if ((error = action.execute(action.state, action.delay))) break\n    } while ((action = actions.shift()))\n\n    this.active = false\n\n    if (error) {\n      while ((action = actions.shift())) {\n        action.unsubscribe()\n      }\n      throw error\n    }\n  }\n}\n","import { AnimationFrameAction } from './AnimationFrameAction'\nimport { AnimationFrameScheduler } from './AnimationFrameScheduler'\nexport const animationFrame = new AnimationFrameScheduler(AnimationFrameAction)\n","import { AsyncAction } from './AsyncAction'\n\nexport class QueueAction extends AsyncAction {\n  schedule (state, delay = 0) {\n    if (this.closed) return this\n    if (delay > 0) {\n      return super.schedule(state, delay)\n    }\n\n    this.state = state\n    this.delay = delay\n    this.scheduler.flush(this)\n    return this\n  }\n\n  requestAsyncId (scheduler, id, delay) {\n    if ((delay !== null && delay > 0) || (delay === null && this.delay > 0)) {\n      return super.requestAsyncId(scheduler, id, delay)\n    }\n    return scheduler.flush(this)\n  }\n}\n","import { AsyncScheduler } from './AsyncScheduler'\nexport class QueueScheduler extends AsyncScheduler {}\n","import { QueueAction } from './QueueAction'\nimport { QueueScheduler } from './QueueScheduler'\nexport const queue = new QueueScheduler(QueueAction)\n","import { asap } from './asap'\nimport { async } from './async'\nimport { animationFrame } from './animationFrame'\nimport { queue } from './queue'\n\nexport const Scheduler = {\n  async,\n  asap,\n  animationFrame,\n  queue\n}\n","import { Scheduler } from '../schedulers'\nimport { Subscriber } from '../Subscriber'\nimport { Notification } from '../Notification'\nimport { isDate } from '../utils'\nexport function delayOperator (delay = 0, scheduler = Scheduler.async) {\n  const absoluteDelay = isDate(delay)\n  const delayFor = absoluteDelay ? +delay - scheduler.now() : Math.abs(delay)\n  return observer => new DelaySubscriber(observer, delayFor, scheduler)\n}\n\nclass DelaySubscriber extends Subscriber {\n  constructor (destination, delay, scheduler) {\n    super(destination)\n    this.delay = delay\n    this.scheduler = scheduler\n    this.queue = []\n    this.active = false\n    this.errored = false\n  }\n\n  _schedule (scheduler) {\n    this.active = true\n    this.add(\n      scheduler.schedule(DelaySubscriber.dispatch, this.delay, {\n        source: this,\n        destination: this.destination,\n        scheduler\n      })\n    )\n  }\n\n  scheduleNotification (notification) {\n    if (this.errored === true) {\n      return\n    }\n\n    const scheduler = this.scheduler\n    const message = {\n      time: scheduler.now() + this.delay,\n      notification\n    }\n    this.queue.push(message)\n\n    if (this.active === false) {\n      this._schedule(scheduler)\n    }\n  }\n\n  _next (value) {\n    this.scheduleNotification(Notification.createNext(value))\n  }\n\n  _error (err) {\n    this.errored = true\n    this.queue = []\n    this.destination.error(err)\n  }\n\n  _complete () {\n    this.scheduleNotification(Notification.createComplete())\n  }\n\n  static dispatch (state) {\n    const source = state.source\n    const queue = source.queue\n    const scheduler = state.scheduler\n    const destination = state.destination\n\n    while (queue.length > 0 && queue[0].time - scheduler.now() <= 0) {\n      queue.shift().notification.observe(destination)\n    }\n\n    if (queue.length > 0) {\n      const delay = Math.max(0, queue[0].time - scheduler.now())\n      this.schedule(state, delay)\n    } else {\n      source.active = false\n    }\n  }\n}\n","import { delayOperator } from '../../operators/delay'\nimport { Observable } from '../../Observable'\n\nObservable.prototype.delay = function (nextOrObserver, error, complete) {\n  return this.lift(delayOperator(nextOrObserver, error, complete))\n}\n","import { ArgumentOutOfRangeError } from '../utils'\nexport function takeOperator (number = Number.POSITIVE_INFINITY) {\n  if (number < 0) {\n    throw new ArgumentOutOfRangeError()\n  }\n  return observer => {\n    let count = 0\n    if (number === 0) {\n      observer.complete()\n      return false\n    }\n    return function (val) {\n      count++\n      if (count > number) {\n        observer.complete()\n      } else {\n        observer.next(val)\n        if (count === number) {\n          observer.complete()\n        }\n      }\n    }\n  }\n}\n","import { takeOperator } from '../../operators/take'\nimport { Observable } from '../../Observable'\n\nObservable.prototype.take = function (number) {\n  return this.lift(takeOperator(number))\n}\n","export function filterOperator (predicate, context) {\n  let index = 0\n  return observer => val => {\n    try {\n      if (predicate.call(context, val, index++)) {\n        observer.next(val)\n      }\n    } catch (e) {\n      observer.error(e)\n    }\n  }\n}\n","import { filterOperator } from '../../operators/filter'\nimport { Observable } from '../../Observable'\n\nObservable.prototype.filter = function (predicate, context) {\n  return this.lift(filterOperator(predicate, context))\n}\n","export function mapOperator (project, context) {\n  if (typeof project !== 'function') {\n    throw new TypeError(\n      'argument is not a function. Are you looking for `mapTo()`?'\n    )\n  }\n  let index = 0\n  return observer => val => {\n    try {\n      observer.next(project.call(context, val, index++))\n    } catch (e) {\n      observer.error(e)\n    }\n  }\n}\n","import { mapOperator } from '../../operators/map'\nimport { Observable } from '../../Observable'\n\nObservable.prototype.map = function (project, context) {\n  return this.lift(mapOperator(project, context))\n}\n","import { mergeMapOperator } from '../../operators/mergeMap'\nimport { Observable } from '../../Observable'\n\nObservable.prototype.mergeMap = function (project, resultSelector, concurrent) {\n  return this.lift(mergeMapOperator(project, resultSelector, concurrent))\n}\n","import { isFunction } from '../utils'\nexport function distinctUntilChangedOperator (compare, keySelector) {\n  const selectable = isFunction(keySelector)\n  compare = isFunction(compare) ? compare : (a, b) => a === b\n  return observer => {\n    let emited = false\n    let key\n    let prevKey\n    return function (value) {\n      try {\n        if (selectable) {\n          key = keySelector(value)\n        } else {\n          key = value\n        }\n\n        if (!emited || Boolean(compare(prevKey, key)) === false) {\n          observer.next(value)\n        }\n\n        emited = true\n        prevKey = key\n      } catch (e) {\n        observer.error(e)\n      }\n    }\n  }\n}\n","import { distinctUntilChangedOperator } from '../../operators/distinctUntilChanged'\nimport { Observable } from '../../Observable'\n\nObservable.prototype.distinctUntilChanged = function (compare, keySelector) {\n  return this.lift(distinctUntilChangedOperator(compare, keySelector))\n}\n","import { isScheduler } from '../utils'\nexport function startWithOperator (...args) {\n  const scheduler = args[args.length - 1]\n  let hasScheduler = false\n  if (isScheduler(scheduler)) {\n    args.pop()\n    hasScheduler = true\n  }\n  const length = args.length\n\n  // 不能使用箭头函数\n  const dispatch = function (state) {\n    const { values, index, length, observer } = state\n    if (index >= length) return\n    observer.next(values[index])\n    state.index = index + 1\n    this.schedule(state)\n  }\n  return observer => {\n    if (hasScheduler) {\n      scheduler.schedule(dispatch, 0, {\n        values: args,\n        index: 0,\n        length,\n        observer\n      })\n    } else {\n      for (let i = 0; i < length; i++) {\n        observer.next(args[i])\n      }\n    }\n  }\n}\n","import { startWithOperator } from '../../operators/startWith'\nimport { Observable } from '../../Observable'\n\nObservable.prototype.startWith = function (...args) {\n  return this.lift(startWithOperator(...args))\n}\n","import { OuterSubscriber } from '../OuterSubscriber'\nimport { subscribeToResult } from '../utils/subscribeToResult'\nconst none = {}\nexport function combineLatestOperator (project) {\n  return observer => new CombineLatestSubscriber(observer, project)\n}\n\nclass CombineLatestSubscriber extends OuterSubscriber {\n  constructor (destination, project) {\n    super(destination)\n    this.project = project\n    this.observables = []\n    this.values = []\n    this.active = 0\n    this.toRespond = 0\n  }\n\n  _next (observable) {\n    this.values.push(none)\n    this.observables.push(observable)\n  }\n\n  _complete () {\n    const observables = this.observables\n    const len = observables.length\n    if (len === 0) {\n      this.destination.complete()\n    } else {\n      this.active = len\n      this.toRespond = len\n      for (let i = 0; i < len; i++) {\n        const observable = observables[i]\n        this.add(subscribeToResult(this, observable, observable, i))\n      }\n    }\n  }\n\n  _tryProject (values) {\n    try {\n      const data = this.project.apply(this, values)\n      this.destination.next(data)\n    } catch (err) {\n      this.destination.error(err)\n    }\n  }\n\n  notifyNext (outerValue, innerValue, outerIndex, innerIndex) {\n    const values = this.values\n    const oldVal = values[outerIndex]\n    const toRespond = !this.toRespond\n      ? 0\n      : oldVal === none ? --this.toRespond : this.toRespond\n\n    values[outerIndex] = innerValue\n\n    if (toRespond === 0) {\n      if (this.project) {\n        this._tryProject(values)\n      } else {\n        this.destination.next(values.slice())\n      }\n    }\n  }\n\n  notifyComplete () {\n    if ((this.active -= 1) === 0) {\n      this.destination.complete()\n    }\n  }\n}\n","import { combineLatestOperator } from '../../operators/combineLatest'\nimport { Observable } from '../../Observable'\nimport { isArray } from '../../utils'\nimport { ArrayObservable } from '../../observables/ArrayObservable'\n\n// 没想到把数据源进行整合成一起，这样做确实方便很多\nObservable.prototype.combineLatest = function (observables, project) {\n  const streams = isArray(observables) ? observables : [observables]\n  streams.unshift(this)\n  return new ArrayObservable(streams).lift(combineLatestOperator(project))\n}\n","export function mapToOperator (value) {\n  return observer => () => {\n    observer.next(value)\n  }\n}\n","import { mapToOperator } from '../../operators/mapTo'\nimport { Observable } from '../../Observable'\n\nObservable.prototype.mapTo = function (value) {\n  return this.lift(mapToOperator(value))\n}\n","import { mergeMapOperator } from './mergeMap'\n\nexport const mergeAll = function (concurrent) {\n  return this.lift(mergeMapOperator(undefined, undefined, concurrent))\n}\n","import { mergeAll } from '../../operators/mergeAll'\nimport { Observable } from '../../Observable'\n\nObservable.prototype.mergeAll = mergeAll\n","import { merge } from '../../observables/merge'\nimport { Observable } from '../../Observable'\n\nObservable.prototype.merge = function (...observables) {\n  return merge.call(this, this, ...observables)\n}\n","import { concat as concatObservable } from '../observables/concat'\n\nexport const concat = function (...observables) {\n  observables.unshift(this)\n  return concatObservable(...observables)\n}\n","import { concat } from '../../operators/concat'\nimport { Observable } from '../../Observable'\n\nObservable.prototype.concat = concat\n","import { mergeAll } from './mergeAll'\n\nexport const concatAll = function () {\n  return mergeAll(1)\n}\n","import { concatAll } from '../../operators/concatAll'\nimport { Observable } from '../../Observable'\n\nObservable.prototype.concatAll = concatAll\n","import { mergeMapOperator } from './mergeMap'\n\nexport function concatMap (project, resultSelector) {\n  return mergeMapOperator(project, resultSelector, 1)\n}\n","import { concatMap } from '../../operators/concatMap'\nimport { Observable } from '../../Observable'\n\nObservable.prototype.concatMap = function (project, resultSelector) {\n  return this.lift(concatMap(project, resultSelector))\n}\n","import { concatMap } from './concatMap'\nexport const concatMapTo = function (innerObservable, resultSelector) {\n  return concatMap(() => innerObservable, resultSelector)\n}\n","import { concatMapTo } from '../../operators/concatMapTo'\nimport { Observable } from '../../Observable'\n\nObservable.prototype.concatMapTo = function (innerObservable, resultSelector) {\n  return this.lift(concatMapTo(innerObservable, resultSelector))\n}\n","import { OuterSubscriber } from '../OuterSubscriber'\nimport { subscribeToResult } from '../utils/subscribeToResult'\nexport function withLatestFromOperator (observables, project) {\n  return observer =>\n    new WithLatestFromSubscriber(observer, observables, project)\n}\n\nclass WithLatestFromSubscriber extends OuterSubscriber {\n  constructor (destination, observables, project) {\n    super(destination)\n    this.project = project\n    this.observables = observables\n    this.toRespond = []\n    const len = observables.length\n    this.values = new Array(len)\n\n    for (let i = 0; i < len; i++) {\n      this.toRespond.push(i)\n      let observable = observables[i]\n      this.add(subscribeToResult(this, observable, observable, i))\n    }\n  }\n\n  notifyNext (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n    this.values[outerIndex] = innerValue\n    const toRespond = this.toRespond\n    if (toRespond.length > 0) {\n      const found = toRespond.indexOf(outerIndex)\n      if (found !== -1) {\n        toRespond.splice(found, 1)\n      }\n    }\n  }\n\n  notifyComplete () {\n    // noop\n  }\n\n  _next (value) {\n    if (this.toRespond.length === 0) {\n      const args = [value, ...this.values]\n      if (this.project) {\n        this._tryProject(args)\n      } else {\n        this.destination.next(args)\n      }\n    }\n  }\n\n  _tryProject (args) {\n    let result\n    try {\n      result = this.project.apply(this, args)\n    } catch (err) {\n      this.destination.error(err)\n      return\n    }\n    this.destination.next(result)\n  }\n}\n","import { withLatestFromOperator } from '../../operators/withLatestFrom'\nimport { Observable } from '../../Observable'\n\nObservable.prototype.withLatestFrom = withLatestFromOperator\n","import { Observable } from './Observable'\nimport { ObjectUnsubscribedError, wrapOperator } from './utils'\nimport { rxSubscriber as rxSubscriberSymbol } from './symbol'\nexport class Subject extends Observable {\n  constructor () {\n    super()\n    this.closed = false\n    this.isStopped = false\n    this.observers = []\n    this.hasError = false\n    this.thrownError = null\n  }\n\n  lift (operator) {\n    const subject = new AnonymousSubject(this, this)\n    subject.operator = wrapOperator(operator)\n    return subject\n  }\n\n  next (state) {\n    if (this.closed) {\n      throw new ObjectUnsubscribedError()\n    }\n    if (!this.isStopped) {\n      iterateObserver(this.observers, 'next', state)\n    }\n  }\n\n  error (e) {\n    if (this.closed) {\n      throw new ObjectUnsubscribedError()\n    }\n    if (!this.isStopped) {\n      this.hasError = true\n      this.thrownError = e\n      this.isStopped = true\n      iterateObserver(this.observers, 'error', e)\n      this.observers = []\n    }\n  }\n\n  complete () {\n    if (this.closed) {\n      throw new ObjectUnsubscribedError()\n    }\n    if (!this.isStopped) {\n      this.isStopped = true\n      iterateObserver(this.observers, 'complete')\n      this.observers = []\n    }\n  }\n\n  unsubscribe () {\n    this.closed = true\n    this.isStopped = true\n    this.observers = null\n  }\n\n  _trySubscribe (observer) {\n    if (this.closed) {\n      throw new ObjectUnsubscribedError()\n    } else {\n      return super._trySubscribe(observer)\n    }\n  }\n\n  _subscribe (observer) {\n    if (this.hasError) {\n      observer.error(this.thrownError)\n    } else if (this.isStopped) {\n      observer.complete()\n    } else {\n      this.observers.push(observer)\n      // 释放资源\n      return () => subjectSubscription(this, observer)\n    }\n  }\n\n  asObservable () {\n    const observable = new Observable()\n    observable.source = this\n    return observable\n  }\n\n  static create (destination, source) {\n    return new AnonymousSubject(destination, source)\n  }\n\n  // Subject -> Subscriber\n  [rxSubscriberSymbol] () {\n    const subject = this\n    return {\n      next (val) {\n        subject.next(val)\n      },\n      error (e) {\n        subject.error(e)\n      },\n      complete () {\n        subject.complete()\n      }\n    }\n  }\n}\n\nexport class AnonymousSubject extends Subject {\n  constructor (destination, source) {\n    super()\n    this.dest = destination\n    this.source = source\n  }\n\n  next (value) {\n    if (this.dest && this.dest.next) {\n      this.dest.next(value)\n    }\n  }\n\n  error (err) {\n    if (this.dest && this.dest.error) {\n      this.dest.error(err)\n    }\n  }\n\n  complete () {\n    if (this.dest && this.dest.complete) {\n      this.dest.complete()\n    }\n  }\n\n  _subscribe (observer) {\n    if (this.source) {\n      return this.source.subscribe(observer)\n    }\n  }\n}\n\nfunction iterateObserver (observers, key, val) {\n  const len = observers.length\n  const list = observers.slice()\n  for (let i = 0; i < len; i++) {\n    list[i][key](val)\n  }\n}\n\nfunction subjectSubscription (subject, observer) {\n  if (subject.observers.length === 0) {\n    return\n  }\n  const index = subject.observers.indexOf(observer)\n  if (index !== -1) {\n    subject.observers.splice(index, 1)\n  }\n}\n","import { Subject } from './Subject'\nimport { ObjectUnsubscribedError } from './utils'\nexport class BehaviorSubject extends Subject {\n  constructor (val) {\n    super()\n    this._value = val\n  }\n\n  next (val) {\n    this._value = val\n    super.next(val)\n  }\n\n  _subscribe (observer) {\n    const res = super._subscribe(observer)\n    if (!observer.closed) {\n      observer.next(this._value)\n    }\n    return res\n  }\n\n  getValue () {\n    if (this.hasError) {\n      throw this.thrownError\n    } else if (this.closed) {\n      throw new ObjectUnsubscribedError()\n    } else {\n      return this._value\n    }\n  }\n\n  get value () {\n    return this.getValue()\n  }\n}\n","import { Subject } from './Subject'\nexport class AsyncSubject extends Subject {\n  value = null\n  hasNext = false\n  hasCompleted = false\n\n  _subscribe (observer) {\n    if (this.hasError) {\n      observer.error(this.thrownError)\n    } else if (this.hasCompleted && this.hasNext) {\n      observer.next(this.value)\n      observer.complete()\n    }\n    return super._subscribe(observer)\n  }\n\n  next (value) {\n    if (!this.hasCompleted) {\n      this.value = value\n      this.hasNext = true\n    }\n  }\n\n  error (error) {\n    if (!this.hasCompleted) {\n      super.error(error)\n    }\n  }\n\n  complete () {\n    this.hasCompleted = true\n    if (this.hasNext) {\n      super.next(this.value)\n    }\n    super.complete()\n  }\n}\n","import { Subject } from './Subject'\nimport { Scheduler } from './Scheduler'\nimport { ObjectUnsubscribedError } from './utils'\nimport { ObserveOnSubscriber } from './operators/observeOn'\nexport class ReplaySubject extends Subject {\n  constructor (\n    bufferSize = Number.POSITIVE_INFINITY,\n    windowTime = Number.POSITIVE_INFINITY,\n    scheduler\n  ) {\n    super()\n    this._bufferSize = bufferSize < 1 ? 1 : bufferSize\n    this._windowTime = windowTime < 1 ? 1 : windowTime\n    this.scheduler = scheduler\n    this._events = []\n  }\n\n  next (value) {\n    this._events.push({\n      time: this._getNow(),\n      value\n    })\n    // 避免数据添加过多\n    this._trimBufferThenGetEvents()\n    super.next(value)\n  }\n\n  _subscribe (observer) {\n    const events = this._trimBufferThenGetEvents()\n    const scheduler = this.scheduler\n    // 在ReplaySubject中关闭了还订阅会报错\n    if (this.closed) {\n      throw new ObjectUnsubscribedError()\n    }\n    let subscription\n    if (!this.hasError && !this.isStopped) {\n      subscription = super._subscribe(observer)\n    }\n\n    if (scheduler) {\n      observer = new ObserveOnSubscriber(observer, scheduler)\n      observer.add(observer)\n    }\n\n    const length = events.length\n    for (let i = 0; i < length; i++) {\n      observer.next(events[i].value)\n    }\n\n    if (this.hasError) {\n      observer.error(this.thrownError)\n    } else if (this.isStopped) {\n      observer.complete()\n    }\n\n    return subscription\n  }\n\n  _getNow () {\n    return (this.scheduler || Scheduler).now()\n  }\n\n  _trimBufferThenGetEvents () {\n    const { _events, _bufferSize, _windowTime } = this\n    let length = _events.length\n    const now = this._getNow()\n    let index = 0\n    if (length > _bufferSize) {\n      _events.splice(0, length - _bufferSize)\n    }\n\n    if (_windowTime === Number.POSITIVE_INFINITY) {\n      return _events\n    }\n\n    length = _events.length\n    while (index < length) {\n      if (now - _events[index].time < _windowTime) {\n        break\n      }\n      index++\n    }\n    _events.splice(0, index)\n    return _events\n  }\n}\n"],"names":["makeMap","str","expectsLowerCase","map","Object","create","list","split","i","length","val","toLowerCase","objectProto","prototype","toString","call","obj","viewClasses","viewClassesMap","clazz","join","isUndefined","undefined","isNil","isString","type","String","isNumber","Number","isObject","isObjectLike","isArray","Array","MAX_SAFE_INTEGER","isLength","value","isArrayLike","isDate","isFunction","tag","isPromise","subscribe","then","id","cache","setImmediate","cb","resolve","handle","clearImmediate","lastTime","AnimationFrame","raf","caf","requestAnimationFrame","cancelAnimationFrame","webkitRequestAnimationFrame","webkitCancelAnimationFrame","msRequestAnimationFrame","msCancelAnimationFrame","mozRequestAnimationFrame","mozCancelAnimationFrame","oRequestAnimationFrame","oCancelAnimationFrame","callback","currTime","Date","getTime","timeToCall","Math","max","setTimeout","clearTimeout","ObjectUnsubscribedError","name","setPrototypeOf","Error","ArgumentOutOfRangeError","Scheduler","SchedulerAction","now","work","delay","state","schedule","isScheduler","_Set","set","key","has","subscritionActions","wrapOperator","operator","operatorWrapper","observer","_subscrition","next","err","error","complete","res","Subscriber","action","subscrition","toSubscriber","add","source","identity","$","uid","Subscription","_closed","_uid","_set","observers","closed","_unsubscribe","unsubscribe","clear","_add","push","splice","indexOf","getSymbolObservable","$$observable","Symbol","observable","symbolIteratorPonyfill","iterator","Set","Map","keys","getOwnPropertyNames","rxSubscriber","destinationOrNext","destination","bind","isStopped","_next","e","errorSource","errorValue","_error","_complete","args","emptySubscriber","observerOrNext","rxSubscriberSymbol","Observable","_subscribe","_isScalar","_trySubscribe","syncError","subscriber","ArrayObservable","array","scheduler","len","dispatch","index","count","EmptyObservable","ScalarObservable","of","pop","empty","ErrorObservable","throwObservable","throw","PromiseObservable","promise","catch","fromPromise","ArrayLikeObservable","IteratorObservable","iteratorObject","SymbolIterator","TypeError","getIterator","done","return","result","StringIterator","idx","charAt","ArrayIterator","Notification","kind","hasValue","observe","nextOrObserver","do","undefinedValueNotification","completeNotification","ObserveOnSubscriber","notification","scheduleMessage","createNext","createError","createComplete","FromObservable","ish","SymbolObservable","fromObservable","from","range","start","end","arr","Action","AsyncAction","pending","recycleAsyncId","requestAsyncId","setInterval","flush","_execute","actions","AsyncScheduler","active","scheduled","execute","shift","async","TimerObservable","dueTime","period","initialDelay","timer","interval","OuterSubscriber","outerValue","innerValue","outerIndex","innerIndex","innerSub","InnerSubscriber","parent","notifyNext","notifyError","notifyComplete","subscribeToResult","outerSubscriber","item","obs","msg","mergeMapOperator","project","resultSelector","concurrent","POSITIVE_INFINITY","MergeMapSubscriber","hasCompleted","buffer","_tryNext","_innerSub","_notifyResultSelector","remove","merge","observables","lift","mergeMap","concat","DeferObservable","observableFactory","DeferSubscriber","factory","tryDefer","_callFactory","defer","NeverObservable","never","doOperator","AsapAction","AsapScheduler","asap","AnimationFrameAction","AnimationFrameScheduler","animationFrame","QueueAction","QueueScheduler","queue","delayOperator","absoluteDelay","delayFor","abs","DelaySubscriber","errored","message","_schedule","scheduleNotification","time","takeOperator","number","take","filterOperator","predicate","context","filter","mapOperator","distinctUntilChangedOperator","compare","keySelector","selectable","a","b","emited","prevKey","Boolean","distinctUntilChanged","startWithOperator","hasScheduler","values","startWith","none","combineLatestOperator","CombineLatestSubscriber","toRespond","data","apply","oldVal","_tryProject","slice","combineLatest","streams","unshift","mapToOperator","mapTo","mergeAll","concatObservable","concatAll","concatMap","concatMapTo","innerObservable","withLatestFromOperator","WithLatestFromSubscriber","found","withLatestFrom","Subject","hasError","thrownError","subject","AnonymousSubject","subjectSubscription","dest","iterateObserver","BehaviorSubject","_value","getValue","AsyncSubject","hasNext","ReplaySubject","bufferSize","windowTime","_bufferSize","_windowTime","_events","_getNow","_trimBufferThenGetEvents","events","subscription"],"mappings":"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"}