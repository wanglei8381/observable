<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta lang="zh">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="renderer" content="webkit">
  <meta name="description" content="">
  <meta name="keyword" content="">
  <title></title>
</head>
<body>
<script src="../dist/rx.js"></script>
<script>
var syncExec1 = true
var syncExec2 = true
var asap = Rx.Scheduler.asap
asap.schedule(function (index) {
  console.log('===>>>>>>', index)
  if (index === 0) {
    this.schedule(1)
//    asap.schedule(function () { syncExec1 = false })
  }
  else if (index === 1) {
    this.schedule(2)
//    asap.schedule(function () { syncExec2 = false })
  }
  else if (index === 2) {
    this.schedule(3)
  }
  else if (index === 3) {
    if (!syncExec1 && !syncExec2) {
      console.log('OKOKOK')
    }
    else {
      console.log('failfailfail')
    }
  }
}, 0, 0)
</script>
</body>
</html>